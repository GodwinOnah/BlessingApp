{"ast":null,"code":"import { AdvertsComponent } from '../Adverts/adverts/adverts.component';\nimport { AddDeliveryComponent } from '../orders/add-delivery/add-delivery.component';\nimport { ProductBrandComponent } from '../products/product-brand/product-brand.component';\nimport { ProductTypeComponent } from '../products/product-type/product-type.component';\nimport { ItemsComponent } from '../products/productItems/items/items.component';\nimport { environment } from 'environments/environment';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/material/dialog\";\nimport * as i2 from \"../orders/orders.service\";\nimport * as i3 from \"ngx-toastr\";\nimport * as i4 from \"../Account/account.service\";\nimport * as i5 from \"../Adverts/adverts/adverts.service\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"@angular/router\";\nfunction AdminComponent_ng_container_1_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 4)(1, \"strong\", 5);\n    i0.ɵɵtext(2, \" Sorry!!! Only the admin can access this page \");\n    i0.ɵɵelementStart(3, \"p\");\n    i0.ɵɵtext(4, \"Why not continue by clicking products and making orders..\");\n    i0.ɵɵelementEnd()()();\n  }\n}\nfunction AdminComponent_ng_container_1_div_2_ng_container_31_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"strong\", 26);\n    i0.ɵɵtext(2, \"No order requested.\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n}\nfunction AdminComponent_ng_container_1_div_2_tr_32_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\", 27)(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵtext(10);\n    i0.ɵɵpipe(11, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"td\");\n    i0.ɵɵtext(13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"td\");\n    i0.ɵɵtext(15);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const order_r10 = ctx.$implicit;\n    i0.ɵɵpropertyInterpolate1(\"routerLink\", \"/Admin/\", order_r10.id, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(order_r10.adminOrderId);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", order_r10.shippingAddress.firstName + \" \" + order_r10.shippingAddress.middleName + \" \" + order_r10.shippingAddress.lastName, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(order_r10.email);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(order_r10.shippingAddress.phone);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(11, 8, order_r10.orderDate, \"medium\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(order_r10.orderStatus);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(order_r10.confirmation);\n  }\n}\nfunction AdminComponent_ng_container_1_div_2_ng_container_50_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"h2\", 22);\n    i0.ɵɵtext(2, \"List of available deliveries\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n}\nfunction AdminComponent_ng_container_1_div_2_div_51_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r13 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"Strong\")(2, \"strong\", 28);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"strong\", 28);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"strong\", 28);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"button\", 29);\n    i0.ɵɵlistener(\"click\", function AdminComponent_ng_container_1_div_2_div_51_Template_button_click_8_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r13);\n      const item_r11 = restoredCtx.$implicit;\n      const ctx_r12 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r12.deleteDelivery(item_r11.id));\n    });\n    i0.ɵɵtext(9, \"Delete me\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const item_r11 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" Name: \", item_r11.delName, \",\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" Time: \", item_r11.delTime, \",\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" Price: \\u00A3\", item_r11.delPrice, \"\");\n  }\n}\nfunction AdminComponent_ng_container_1_div_2_ng_container_60_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"h2\", 22);\n    i0.ɵɵtext(2, \"List of availabel adverts\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n}\nfunction AdminComponent_ng_container_1_div_2_div_61_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r16 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"marquee\", 30)(2, \"strong\")(3, \"strong\", 18);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"button\", 29);\n    i0.ɵɵlistener(\"click\", function AdminComponent_ng_container_1_div_2_div_61_Template_button_click_5_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r16);\n      const item_r14 = restoredCtx.$implicit;\n      const ctx_r15 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r15.deleteAdvert(item_r14.id));\n    });\n    i0.ɵɵtext(6, \"Delete me\");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const item_r14 = ctx.$implicit;\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\"\", item_r14.advert, \" \");\n  }\n}\nfunction AdminComponent_ng_container_1_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r18 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 6)(1, \"h1\", 4)(2, \"strong\", 7);\n    i0.ɵɵtext(3, \" ADMIN MANAGEMENT\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"marquee\", 8);\n    i0.ɵɵtext(5, \"Now that you've login as the admin, you can delete any product on the product page; add advert(s) to the end of the display strings on the product page; add and remove brands and types; confirm or delete order, etc. Thanks. Thanks\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(6, \"hr\", 9);\n    i0.ɵɵelementStart(7, \"div\", 10)(8, \"strong\", 11)(9, \"h1\");\n    i0.ɵɵtext(10, \"Customer completed oders\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(11, \"div\", 12)(12, \"div\", 13)(13, \"table\", 14)(14, \"thead\", 15)(15, \"tr\")(16, \"th\");\n    i0.ɵɵtext(17, \"ORDER\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"th\");\n    i0.ɵɵtext(19, \"CUSTOMER NAME\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(20, \"th\");\n    i0.ɵɵtext(21, \"CUSTOMER EMAIL\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(22, \"th\");\n    i0.ɵɵtext(23, \"CUSTOMER PHONE\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(24, \"th\");\n    i0.ɵɵtext(25, \"DATE\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(26, \"th\");\n    i0.ɵɵtext(27, \"STATUS\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(28, \"th\");\n    i0.ɵɵtext(29, \"CONFIRMATION\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(30, \"tbody\");\n    i0.ɵɵtemplate(31, AdminComponent_ng_container_1_div_2_ng_container_31_Template, 3, 0, \"ng-container\", 1);\n    i0.ɵɵtemplate(32, AdminComponent_ng_container_1_div_2_tr_32_Template, 16, 11, \"tr\", 16);\n    i0.ɵɵelementEnd()()()()();\n    i0.ɵɵelement(33, \"hr\", 9);\n    i0.ɵɵelementStart(34, \"div\", 17)(35, \"strong\", 18)(36, \"h1\");\n    i0.ɵɵtext(37, \"Add new items and properties here\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(38, \"button\", 19);\n    i0.ɵɵlistener(\"click\", function AdminComponent_ng_container_1_div_2_Template_button_click_38_listener() {\n      i0.ɵɵrestoreView(_r18);\n      const ctx_r17 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r17.openUploadProduct());\n    });\n    i0.ɵɵtext(39, \" Upload new product here \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(40, \"button\", 19);\n    i0.ɵɵlistener(\"click\", function AdminComponent_ng_container_1_div_2_Template_button_click_40_listener() {\n      i0.ɵɵrestoreView(_r18);\n      const ctx_r19 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r19.openUploadType());\n    });\n    i0.ɵɵtext(41, \" Add product type here \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(42, \"button\", 19);\n    i0.ɵɵlistener(\"click\", function AdminComponent_ng_container_1_div_2_Template_button_click_42_listener() {\n      i0.ɵɵrestoreView(_r18);\n      const ctx_r20 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r20.openUploadBrand());\n    });\n    i0.ɵɵtext(43, \" Add product brand here \");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelement(44, \"hr\", 9);\n    i0.ɵɵelementStart(45, \"div\", 20)(46, \"div\", 21)(47, \"h1\", 22);\n    i0.ɵɵtext(48, \"ADD DELIVERY\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(49, \"hr\", 18);\n    i0.ɵɵtemplate(50, AdminComponent_ng_container_1_div_2_ng_container_50_Template, 3, 0, \"ng-container\", 1);\n    i0.ɵɵtemplate(51, AdminComponent_ng_container_1_div_2_div_51_Template, 10, 3, \"div\", 23);\n    i0.ɵɵelementStart(52, \"div\", 4)(53, \"button\", 19);\n    i0.ɵɵlistener(\"click\", function AdminComponent_ng_container_1_div_2_Template_button_click_53_listener() {\n      i0.ɵɵrestoreView(_r18);\n      const ctx_r21 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r21.openAddDelivery());\n    });\n    i0.ɵɵtext(54, \" Add new delivery \");\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(55, \"div\", 24)(56, \"h1\", 22);\n    i0.ɵɵtext(57, \"Your Adverts\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(58, \"hr\", 18);\n    i0.ɵɵelementStart(59, \"div\", 25);\n    i0.ɵɵtemplate(60, AdminComponent_ng_container_1_div_2_ng_container_60_Template, 3, 0, \"ng-container\", 1);\n    i0.ɵɵtemplate(61, AdminComponent_ng_container_1_div_2_div_61_Template, 7, 1, \"div\", 23);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(62, \"button\", 19);\n    i0.ɵɵlistener(\"click\", function AdminComponent_ng_container_1_div_2_Template_button_click_62_listener() {\n      i0.ɵɵrestoreView(_r18);\n      const ctx_r22 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r22.openAdvertDialog());\n    });\n    i0.ɵɵtext(63, \" Add new adverts \");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(31);\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.adminOrders.length == 0);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r3.adminOrders);\n    i0.ɵɵadvance(18);\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.deliveries.length > 0 && ctx_r3.delNotice == true);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r3.deliveries);\n    i0.ɵɵadvance(9);\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.advertsString.length > 0 && ctx_r3.delNotice == true);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r3.advertsString);\n  }\n}\nfunction AdminComponent_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, AdminComponent_ng_container_1_div_1_Template, 5, 0, \"div\", 2);\n    i0.ɵɵtemplate(2, AdminComponent_ng_container_1_div_2_Template, 64, 6, \"div\", 3);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const user_r1 = ctx.ngIf;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", user_r1.email != ctx_r0.adminEmail);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", user_r1.email == ctx_r0.adminEmail);\n  }\n}\nexport class AdminComponent {\n  constructor(matdialog, orderservice, toastr, accountService, advert) {\n    this.matdialog = matdialog;\n    this.orderservice = orderservice;\n    this.toastr = toastr;\n    this.accountService = accountService;\n    this.advert = advert;\n    this.admin = \"\";\n    this.customerName = \"\";\n    this.adminOrders = [];\n    this.confirm = false;\n    this.advertsString = [];\n    this.errors = null;\n    this.notice = false;\n    this.delNotice = false;\n    this.deliveries = [];\n    this.adminEmail = environment.adminEmail;\n  }\n  ngOnInit() {\n    this.GetPaidOrders();\n    this.GetAdverts();\n    this.GetDelivery();\n  }\n  openUploadProduct() {\n    this.closeDialog();\n    this.matdialog.open(ItemsComponent, {\n      height: 'auto',\n      width: '80%'\n    });\n  }\n  openUploadType() {\n    this.closeDialog();\n    this.matdialog.open(ProductTypeComponent, {\n      height: 'auto',\n      width: '40%'\n    });\n  }\n  closeDialog() {\n    this.matdialog.closeAll(); // <- Close the mat dialog\n  }\n\n  openUploadBrand() {\n    this.closeDialog();\n    this.matdialog.open(ProductBrandComponent, {\n      height: 'auto',\n      width: '40%'\n    });\n  }\n  openAddDelivery() {\n    this.closeDialog();\n    this.matdialog.open(AddDeliveryComponent, {\n      height: 'auto',\n      width: '70%'\n    });\n  }\n  openAdvertDialog() {\n    this.closeDialog();\n    this.matdialog.open(AdvertsComponent, {\n      height: 'auto',\n      width: '40%'\n    });\n  }\n  GetPaidOrders() {\n    this.orderservice.GetAdminOrders().subscribe({\n      next: adminOrders => {\n        this.adminOrders = adminOrders;\n      }\n    });\n  }\n  confirmer() {\n    this.confirm = true;\n  }\n  GetAdverts() {\n    this.advert.getAdverts().subscribe({\n      next: advert => {\n        if (advert) this.advertsString = advert;\n        if (advert.length == 0) {\n          this.exit = 0;\n          this.notice = true;\n        }\n        for (let x of advert) {\n          this.exit = x.time;\n          setInterval(() => {\n            this.deleteAdvert(x.id);\n          }, x.time * 1000);\n        }\n      },\n      error: error => {\n        this.errors = error.errors;\n        this.toastr.success(\"Can't get advert Ids\");\n      }\n    });\n  }\n  deleteDelivery(id) {\n    this.orderservice.deleteDelivery(id).subscribe({\n      next: yes => {\n        if (yes) {\n          window.location.reload();\n          this.toastr.success(\"delivery deleted\");\n        }\n      },\n      error: error => {\n        this.errors = error.errors;\n        this.toastr.success(\"Delivery not delivery\");\n      }\n    });\n  }\n  deleteAdvert(id) {\n    this.advert.deleteAdverts(id).subscribe({\n      next: yes => {\n        if (yes) {\n          this.toastr.success(\"Advert deleted\");\n          window.location.reload();\n        }\n      },\n      error: error => {\n        this.errors = error.errors;\n        this.toastr.success(\"Can't get advert Ids\");\n      }\n    });\n  }\n  GetDelivery() {\n    this.orderservice.getDelivery().subscribe({\n      next: deliveries => {\n        this.delNotice = true;\n        this.deliveries = deliveries;\n      },\n      error: error => console.log(error)\n    });\n  }\n}\nAdminComponent.ɵfac = function AdminComponent_Factory(t) {\n  return new (t || AdminComponent)(i0.ɵɵdirectiveInject(i1.MatDialog), i0.ɵɵdirectiveInject(i2.OrdersService), i0.ɵɵdirectiveInject(i3.ToastrService), i0.ɵɵdirectiveInject(i4.UserAccountService), i0.ɵɵdirectiveInject(i5.AdvertsService));\n};\nAdminComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: AdminComponent,\n  selectors: [[\"app-admin\"]],\n  decls: 3,\n  vars: 3,\n  consts: [[1, \"container\"], [4, \"ngIf\"], [\"class\", \"text-center\", 4, \"ngIf\"], [\"class\", \"admin\", 4, \"ngIf\"], [1, \"text-center\"], [2, \"color\", \"red\", \"font-weight\", \"bolder\", \"font-size\", \"xx-large\"], [1, \"admin\"], [2, \"color\", \"purple\", \"font-weight\", \"bolder\"], [\"scrollamount\", \"4\"], [2, \"height\", \"50px\"], [1, \"container\", \"mt-5\", \"text-center\", \"customerOrders\", 2, \"background-color\", \"black\"], [2, \"font-weight\", \"bolder\", \"color\", \"gold\"], [1, \"row\"], [1, \"col-12\"], [1, \"table\", \"table-hover\", 2, \"cursor\", \"pointer\"], [1, \"thead-light\"], [3, \"routerLink\", 4, \"ngFor\", \"ngForOf\"], [1, \"adminadd\", 2, \"padding-bottom\", \"50px\", \"margin\", \"10px\"], [2, \"color\", \"gold\"], [1, \"btn\", \"btn-primary\", \"m-5\", 3, \"click\"], [2, \"padding-bottom\", \"40px\", \"margin\", \"10px\"], [1, \"text-center\", 2, \"height\", \"auto\", \"background-color\", \"black\", \"margin\", \"0 auto\", \"overflow\", \"scroll\"], [2, \"color\", \"Gold\"], [4, \"ngFor\", \"ngForOf\"], [1, \"text-center\", 2, \"background-color\", \"black\", \"padding\", \"20px\", \"margin\", \"10px\"], [2, \"max-height\", \"100px\", \"width\", \"80%\", \"margin\", \"0 auto\", \"border-radius\", \"20px\", \"overflow\", \"scroll\"], [2, \"color\", \"red\"], [3, \"routerLink\"], [2, \"color\", \"white\"], [3, \"click\"], [\"scrollAmount\", \"2\", \"onmouseover\", \"this.stop();\", \"onmouseout\", \"this.start();\"]],\n  template: function AdminComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵtemplate(1, AdminComponent_ng_container_1_Template, 3, 2, \"ng-container\", 1);\n      i0.ɵɵpipe(2, \"async\");\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(2, 1, ctx.accountService.AppUser$));\n    }\n  },\n  dependencies: [i6.NgForOf, i6.NgIf, i7.RouterLink, i6.AsyncPipe, i6.DatePipe],\n  styles: [\".admin[_ngcontent-%COMP%]{margin-top:100px}.customerOrders[_ngcontent-%COMP%]{height:auto;max-height:300px;overflow:scroll;border:2px solid black;border-radius:10px;background-color:#f5fffa;position:relative;margin-bottom:20px}.adminadd[_ngcontent-%COMP%]{padding:10px;position:relative;background-color:#000;text-align:center;margin:auto 0}\"]\n});","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}