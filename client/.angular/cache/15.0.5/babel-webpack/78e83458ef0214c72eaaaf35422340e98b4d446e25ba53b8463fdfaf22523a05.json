{"ast":null,"code":"import { take } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../prodshopmod.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"xng-breadcrumb\";\nimport * as i4 from \"app/basket/basket.service\";\nimport * as i5 from \"ngx-toastr\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"@angular/forms\";\nfunction ProductDetaialsComponent_div_0_h5_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"h5\")(1, \"strong\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r1.quantityInBasket, \" of this item are in your basket\");\n  }\n}\nfunction ProductDetaialsComponent_div_0_ng_container_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"strong\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r2.quantityInBasket, \" of this item is in your basket\");\n  }\n}\nfunction ProductDetaialsComponent_div_0_ng_container_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"strong\");\n    i0.ɵɵtext(2, \"This item is not in your basket\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n}\nfunction ProductDetaialsComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 1)(1, \"div\", 2)(2, \"marquee\", 3)(3, \"div\", 4);\n    i0.ɵɵtemplate(4, ProductDetaialsComponent_div_0_h5_4_Template, 3, 1, \"h5\", 5);\n    i0.ɵɵelementStart(5, \"h5\");\n    i0.ɵɵtemplate(6, ProductDetaialsComponent_div_0_ng_container_6_Template, 3, 1, \"ng-container\", 5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"h5\");\n    i0.ɵɵtemplate(8, ProductDetaialsComponent_div_0_ng_container_8_Template, 3, 0, \"ng-container\", 5);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(9, \"div\", 6)(10, \"div\", 7);\n    i0.ɵɵelement(11, \"img\", 8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"div\", 9)(13, \"h5\", 10);\n    i0.ɵɵtext(14, \"What you're buying\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"p\");\n    i0.ɵɵtext(16);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelement(17, \"hr\");\n    i0.ɵɵelementStart(18, \"div\", 11)(19, \"div\", 12)(20, \"table\")(21, \"tr\")(22, \"td\", 13);\n    i0.ɵɵtext(23, \" Quantity:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(24, \"td\", 14)(25, \"i\", 15);\n    i0.ɵɵlistener(\"click\", function ProductDetaialsComponent_div_0_Template_i_click_25_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.ReduceQuantity());\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(26, \"td\")(27, \"strong\", 16)(28, \"input\", 17);\n    i0.ɵɵlistener(\"ngModelChange\", function ProductDetaialsComponent_div_0_Template_input_ngModelChange_28_listener($event) {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.quantity = $event);\n    })(\"keyup.enter\", function ProductDetaialsComponent_div_0_Template_input_keyup_enter_28_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r7 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r7.AddItem());\n    });\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(29, \"td\")(30, \"i\", 18);\n    i0.ɵɵlistener(\"click\", function ProductDetaialsComponent_div_0_Template_i_click_30_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r8 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r8.IncreaseQuantity());\n    });\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(31, \"tr\", 19)(32, \"td\", 13);\n    i0.ɵɵtext(33, \" Price:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(34, \"td\", 20)(35, \"strong\");\n    i0.ɵɵtext(36);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(37, \"tr\", 21)(38, \"td\", 13);\n    i0.ɵɵtext(39, \" Total Price:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(40, \"td\", 14)(41, \"strong\");\n    i0.ɵɵtext(42);\n    i0.ɵɵelementEnd()()()()();\n    i0.ɵɵelementStart(43, \"div\", 22)(44, \"button\", 23);\n    i0.ɵɵlistener(\"click\", function ProductDetaialsComponent_div_0_Template_button_click_44_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r9 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r9.AddItem());\n    });\n    i0.ɵɵelementStart(45, \"strong\");\n    i0.ɵɵtext(46);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(47, \"button\", 24)(48, \"strong\");\n    i0.ɵɵtext(49, \"Go to basket\");\n    i0.ɵɵelementEnd()()()()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.quantityInBasket > 1);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.quantityInBasket == 1);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.quantityInBasket == 0);\n    i0.ɵɵadvance(3);\n    i0.ɵɵpropertyInterpolate(\"src\", ctx_r0.productDetails.prodPicture, i0.ɵɵsanitizeUrl);\n    i0.ɵɵpropertyInterpolate(\"alt\", ctx_r0.productDetails.prodName);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(ctx_r0.productDetails.prodDescription);\n    i0.ɵɵadvance(12);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.quantity);\n    i0.ɵɵadvance(8);\n    i0.ɵɵtextInterpolate1(\"\\u00A3\", ctx_r0.productDetails.prodPrice, \"\");\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate1(\"\\u00A3\", ctx_r0.productDetails.prodPrice * ctx_r0.quantity, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"disabled\", ctx_r0.quantity == ctx_r0.quantityInBasket);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r0.ButtonTxt);\n  }\n}\nexport class ProductDetaialsComponent {\n  constructor(prodshopService, activatedroute, breadcrumbService, basketService, toastr) {\n    this.prodshopService = prodshopService;\n    this.activatedroute = activatedroute;\n    this.breadcrumbService = breadcrumbService;\n    this.basketService = basketService;\n    this.toastr = toastr;\n    this.quantity = 1;\n    this.quantityInBasket = 0;\n    this.breadcrumbService.set('@productName', '');\n  }\n  ngOnInit() {\n    this.ViewProduct();\n  }\n  ViewProduct() {\n    const id = +this.activatedroute.snapshot.paramMap.get('productId');\n    if (id) this.prodshopService.getProduct(id).subscribe({\n      next: product => {\n        this.productDetails = product;\n        this.breadcrumbService.set('@productName', product.prodName);\n        this.basketService.basket$.pipe(take(1)).subscribe({\n          next: basket => {\n            const item = basket?.items.find(i => i.id === id);\n            if (item) {\n              this.quantity = item.quantity;\n              this.quantityInBasket = item.quantity;\n            }\n          }\n        });\n      },\n      error: error => console.log(error)\n    });\n  }\n  AddItem() {\n    if (this.productDetails) {\n      if (this.quantity < 1) return this.toastr.success(\"Item(s) cannot be 0 or negative\");\n      if (this.quantity > this.quantityInBasket) {\n        const itemToAdd = this.quantity - this.quantityInBasket;\n        this.quantityInBasket += itemToAdd;\n        this.basketService.AddItemsToBasket(this.productDetails, itemToAdd);\n      } else {\n        if (this.quantity < 1) return this.toastr.success(\"Item(s) cannot be 0 or negative\");\n        if (this.quantity < this.quantityInBasket) {\n          const itemToReduce = this.quantityInBasket - this.quantity;\n          this.quantityInBasket -= itemToReduce;\n          this.basketService.RemoveItemsFromBasket(this.productDetails.id, itemToReduce);\n        }\n      }\n    }\n  }\n  get ButtonTxt() {\n    return this.quantityInBasket == 0 ? \"Add quantity\" : \"Update\";\n  }\n  ReduceQuantity() {\n    if (this.quantity < 1) return;\n    this.quantity--;\n  }\n  IncreaseQuantity() {\n    this.quantity++;\n  }\n}\nProductDetaialsComponent.ɵfac = function ProductDetaialsComponent_Factory(t) {\n  return new (t || ProductDetaialsComponent)(i0.ɵɵdirectiveInject(i1.ProdshopmodService), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i3.BreadcrumbService), i0.ɵɵdirectiveInject(i4.BasketService), i0.ɵɵdirectiveInject(i5.ToastrService));\n};\nProductDetaialsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ProductDetaialsComponent,\n  selectors: [[\"app-product-detaials\"]],\n  decls: 1,\n  vars: 1,\n  consts: [[\"class\", \"d-flex justify-content-center background\", 4, \"ngIf\"], [1, \"d-flex\", \"justify-content-center\", \"background\"], [1, \"d-flex\", \"flex-column\", \"align-items-center\", 2, \"width\", \"150%\"], [\"direction\", \"left\"], [1, \"d-flex\", \"w-auto\", 2, \"color\", \"blue\", \"font-weight\", \"bold\", \"font-size\", \"larger\"], [4, \"ngIf\"], [1, \"row\"], [1, \"col-8\", \"align-items-center\"], [\"height\", \"100%\", \"width\", \"150%\", 1, \"card-img-top\", \"img-fluids\", 2, \"margin-left\", \"5px\", \"border-radius\", \"20px\", 3, \"src\", \"alt\"], [1, \"col-4\", \"mt-5\"], [2, \"font-weight\", \"bolder\", \"color\", \"blue\"], [1, \"d-flex\", \"flex-column\", \"align-items-center\"], [1, \"btn-quantity-name\"], [1, \"ax\"], [1, \"ay\"], [1, \"fa\", \"fa-minus-circle\", \"text-primary\", \"m-2\", \"changeQntyBtn\", 2, \"cursor\", \"pointer\", \"font-size\", \"2.5em\", 3, \"click\"], [2, \"font-size\", \"2.5em\", \"margin\", \"0 20px\"], [\"type\", \"number\", 2, \"font-size\", \"0.3em\", \"margin\", \"0 20px\", 3, \"ngModel\", \"ngModelChange\", \"keyup.enter\"], [1, \"fa\", \"fa-plus-circle\", \"text-primary\", \"m-2\", \"changeQntyBtn\", 2, \"cursor\", \"pointer\", \"font-size\", \"2.5em\", 3, \"click\"], [1, \"price\"], [1, \"ay\", \"align-items-center\"], [1, \"totalPrice\"], [1, \"btn-order\"], [1, \"btn\", \"btn-prodDetails\", \"fa\", \"fa-shoping-cart\", 3, \"disabled\", \"click\"], [\"routerLink\", \"/basket\", 1, \"btn\", \"btn-prodDetails\", \"btn-pbasket\", \"fa\", \"fa-shoping-cart\"]],\n  template: function ProductDetaialsComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, ProductDetaialsComponent_div_0_Template, 50, 11, \"div\", 0);\n    }\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngIf\", ctx.productDetails);\n    }\n  },\n  dependencies: [i6.NgIf, i7.DefaultValueAccessor, i7.NumberValueAccessor, i7.NgControlStatus, i2.RouterLink, i7.NgModel],\n  styles: [\".row[_ngcontent-%COMP%] {\\n  width: auto;\\n}\\n\\n.btn-prodDetails[_ngcontent-%COMP%] {\\n  background-color: yellow;\\n  width: 200px;\\n  height: 100px;\\n  margin: 10px;\\n  margin-right: 20px;\\n  border-radius: 40px;\\n  border: solid black 5px;\\n}\\n\\n.btn-prodDetails[_ngcontent-%COMP%]:hover {\\n  background-color: green;\\n  color: black;\\n  padding: 10px;\\n}\\n\\n.btn-pbasket[_ngcontent-%COMP%]:hover {\\n  background-color: pink;\\n}\\n\\n.btn-order[_ngcontent-%COMP%] {\\n  margin-top: 50px;\\n  font-size: 20px;\\n  font-weight: bolder;\\n  margin-bottom: 200px;\\n}\\n\\n.totalPrice[_ngcontent-%COMP%] {\\n  margin-top: 10px;\\n}\\n\\n.changeQntyBtn[_ngcontent-%COMP%]:hover {\\n  background-color: black;\\n  border-radius: 10px;\\n}\\n\\n.btn-quantity-number[_ngcontent-%COMP%] {\\n  font-weight: bolder;\\n  margin: 20px;\\n  font-size: 20px;\\n}\\n\\n.background[_ngcontent-%COMP%] {\\n  background-color: lightgrey;\\n  border-radius: 10px;\\n  width: 80%;\\n  height: auto;\\n  margin-left: 10%;\\n}\\n\\n.ax[_ngcontent-%COMP%] {\\n  text-align: right;\\n  color: grey;\\n}\\n\\n.ay[_ngcontent-%COMP%] {\\n  text-align: center;\\n  color: black;\\n}\\n\\ntr[_ngcontent-%COMP%] {\\n  line-height: 40px;\\n}\\n\\ntable[_ngcontent-%COMP%] {\\n  font-size: 30px;\\n  font-weight: bolder;\\n  margin: 10px;\\n}\\n\\n.price[_ngcontent-%COMP%] {\\n  margin-bottom: 10px;\\n  margin-top: 10px;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvcHJvZHVjdHMvcHJvZHVjdC1kZXRhaWFscy9wcm9kdWN0LWRldGFpYWxzLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksV0FBQTtBQUNKOztBQUVBO0VBQ0ksd0JBQUE7RUFDQSxZQUFBO0VBQ0EsYUFBQTtFQUNBLFlBQUE7RUFDQSxrQkFBQTtFQUNBLG1CQUFBO0VBQ0EsdUJBQUE7QUFDSjs7QUFHQTtFQUNJLHVCQUFBO0VBQ0EsWUFBQTtFQUNBLGFBQUE7QUFBSjs7QUFFQTtFQUNJLHNCQUFBO0FBQ0o7O0FBRUE7RUFDSSxnQkFBQTtFQUNBLGVBQUE7RUFDQSxtQkFBQTtFQUNBLG9CQUFBO0FBQ0o7O0FBQ0E7RUFDSSxnQkFBQTtBQUVKOztBQUNBO0VBQ0ksdUJBQUE7RUFDQSxtQkFBQTtBQUVKOztBQUFBO0VBQ0ksbUJBQUE7RUFDQSxZQUFBO0VBQ0EsZUFBQTtBQUdKOztBQUFBO0VBQ0ksMkJBQUE7RUFDQSxtQkFBQTtFQUNBLFVBQUE7RUFDQSxZQUFBO0VBQ0EsZ0JBQUE7QUFHSjs7QUFEQTtFQUNJLGlCQUFBO0VBQ0EsV0FBQTtBQUlKOztBQURBO0VBQ0ksa0JBQUE7RUFDQSxZQUFBO0FBSUo7O0FBREE7RUFDSSxpQkFBQTtBQUlKOztBQURBO0VBQ0ksZUFBQTtFQUNBLG1CQUFBO0VBQ0EsWUFBQTtBQUlKOztBQURBO0VBQ0ksbUJBQUE7RUFDQSxnQkFBQTtBQUlKIiwic291cmNlc0NvbnRlbnQiOlsiLnJvd3tcbiAgICB3aWR0aDogYXV0bztcbn1cblxuLmJ0bi1wcm9kRGV0YWlsc3tcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB5ZWxsb3c7XG4gICAgd2lkdGg6IDIwMHB4O1xuICAgIGhlaWdodDogMTAwcHg7XG4gICAgbWFyZ2luOiAxMHB4O1xuICAgIG1hcmdpbi1yaWdodDogMjBweDtcbiAgICBib3JkZXItcmFkaXVzOiA0MHB4IDtcbiAgICBib3JkZXI6IHNvbGlkIGJsYWNrIDVweDtcbiAgICAgIFxufVxuXG4uYnRuLXByb2REZXRhaWxzOmhvdmVye1xuICAgIGJhY2tncm91bmQtY29sb3I6Z3JlZW47XG4gICAgY29sb3I6YmxhY2s7IFxuICAgIHBhZGRpbmc6IDEwcHg7XG59XG4uYnRuLXBiYXNrZXQ6aG92ZXJ7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogcGluaztcbn1cblxuLmJ0bi1vcmRlcntcbiAgICBtYXJnaW4tdG9wOiA1MHB4O1xuICAgIGZvbnQtc2l6ZTogMjBweDtcbiAgICBmb250LXdlaWdodDogYm9sZGVyO1xuICAgIG1hcmdpbi1ib3R0b206IDIwMHB4O1xufVxuLnRvdGFsUHJpY2V7ICBcbiAgICBtYXJnaW4tdG9wOiAxMHB4O1xufVxuXG4uY2hhbmdlUW50eUJ0bjpob3ZlcntcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiBibGFjazsgXG4gICAgYm9yZGVyLXJhZGl1czogMTBweDt9XG5cbi5idG4tcXVhbnRpdHktbnVtYmVye1xuICAgIGZvbnQtd2VpZ2h0OiBib2xkZXI7XG4gICAgbWFyZ2luOiAyMHB4O1xuICAgIGZvbnQtc2l6ZTogMjBweDtcbn1cblxuLmJhY2tncm91bmR7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogbGlnaHRncmV5O1xuICAgIGJvcmRlci1yYWRpdXM6IDEwcHg7XG4gICAgd2lkdGg6IDgwJTsgXG4gICAgaGVpZ2h0OmF1dG87IFxuICAgIG1hcmdpbi1sZWZ0OjEwJSAgXG59XG4uYXh7XG4gICAgdGV4dC1hbGlnbjogcmlnaHQ7XG4gICAgY29sb3I6Z3JleTtcbn1cblxuLmF5e1xuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICBjb2xvcjpibGFjaztcbn1cblxudHJ7XG4gICAgbGluZS1oZWlnaHQ6NDBweDtcbn1cblxudGFibGV7XG4gICAgZm9udC1zaXplOiAzMHB4O1xuICAgIGZvbnQtd2VpZ2h0OiBib2xkZXI7XG4gICAgbWFyZ2luOiAxMHB4O1xufVxuXG4ucHJpY2V7XG4gICAgbWFyZ2luLWJvdHRvbTogMTBweDtcbiAgICBtYXJnaW4tdG9wOiAxMHB4O30iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n});","map":{"version":3,"mappings":"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","names":["take","i0","ProductDetaialsComponent","constructor","prodshopService","activatedroute","breadcrumbService","basketService","toastr","set","ngOnInit","ViewProduct","id","snapshot","paramMap","get","getProduct","subscribe","next","product","productDetails","prodName","basket$","pipe","basket","item","items","find","i","quantity","quantityInBasket","error","console","log","AddItem","success","itemToAdd","AddItemsToBasket","itemToReduce","RemoveItemsFromBasket","ButtonTxt","ReduceQuantity","IncreaseQuantity","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["/Users/godwinonah/Documents/TheBags/client/src/app/products/product-detaials/product-detaials.component.ts","/Users/godwinonah/Documents/TheBags/client/src/app/products/product-detaials/product-detaials.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { BasketService } from 'app/basket/basket.service';\nimport { IProduct } from 'app/prodsharemod/models/IProduct';\nimport { ToastrService } from 'ngx-toastr';\nimport { take } from 'rxjs';\nimport { BreadcrumbService } from 'xng-breadcrumb';\nimport { ProdshopmodService } from '../prodshopmod.service';\n\n@Component({\n  selector: 'app-product-detaials',\n  templateUrl: './product-detaials.component.html',\n  styleUrls: ['./product-detaials.component.scss']\n})\nexport class ProductDetaialsComponent implements OnInit{\n\n  productDetails?:IProduct;\n  quantity:number=1;\n  quantityInBasket=0;\n\n  constructor(\n            private prodshopService:ProdshopmodService, \n            private activatedroute:ActivatedRoute,\n            private breadcrumbService:BreadcrumbService,\n            private basketService: BasketService,\n            private toastr : ToastrService)\n            {\n              this.breadcrumbService.set('@productName','')\n          }\n\n  ngOnInit(): void {\n    this.ViewProduct();\n  }\n\n  ViewProduct(){\n    const id = +this.activatedroute.snapshot.paramMap.get('productId');\n\n    if(id)this.prodshopService.getProduct(id).subscribe(\n          { next : product=>\n              {\n              this.productDetails = product;\n              this.breadcrumbService.set('@productName',product.prodName);\n              this.basketService.basket$.pipe(take(1)).subscribe({\n                next : basket=>{\n                  const item = basket?.items.find ( i=>i.id === id )               \n                              if(item){\n                                this.quantity = item.quantity;\n                                this.quantityInBasket=item.quantity\n}}})},\n                error:error=>console.log(error)\n            })}\n\n  AddItem(){\n\n    if(this.productDetails){\n      if (this.quantity<1) \n       return this.toastr.success(\"Item(s) cannot be 0 or negative\");\n      if(this.quantity>this.quantityInBasket){\n        const itemToAdd = this.quantity-this.quantityInBasket;\n        this.quantityInBasket += itemToAdd;\n        this.basketService.AddItemsToBasket(this.productDetails,itemToAdd)\n      }\n      else{\n        if (this.quantity<1) \n         return this.toastr.success(\"Item(s) cannot be 0 or negative\");\n        if(this.quantity<this.quantityInBasket){\n          const itemToReduce=this.quantityInBasket-this.quantity;\n          this.quantityInBasket-=itemToReduce;\n          this.basketService.RemoveItemsFromBasket(this.productDetails.id,itemToReduce) \n        }\n      }\n    }  \n  }\n\n get ButtonTxt(){\n  return this.quantityInBasket==0?\"Add quantity\":\"Update\"   \n  }\n\n  ReduceQuantity(){\n    if(this.quantity<1) return;\n    this.quantity--;  \n  }\n\n  IncreaseQuantity(){\n    this.quantity++;  \n  }\n}\n","<div *ngIf=\"productDetails\" class=\"d-flex justify-content-center background\" >       \n    <div class=\"d-flex flex-column align-items-center\" style=\"width:150%;\">      \n        <marquee  direction=\"left\" >\n            <div class=\"d-flex  w-auto\" style=\"color: blue; font-weight: bold; font-size: larger;\">\n            <h5 *ngIf=\"quantityInBasket>1\">\n                <strong>{{quantityInBasket}} of this item are in your basket</strong>             \n            </h5>\n            <h5> \n                <ng-container *ngIf=\"quantityInBasket==1\">\n                    <strong>{{quantityInBasket}} of this item is in your basket</strong>\n                </ng-container>\n            </h5>        \n                <h5> \n                    <ng-container *ngIf=\"quantityInBasket==0\">\n                        <strong>This item is not in your basket</strong>\n                    </ng-container>\n                </h5>          \n            </div>\n        </marquee>\n        <div class=\"row\">\n                <div class=\"col-8 align-items-center\" >\n                    <img src={{productDetails.prodPicture}} class=\"card-img-top img-fluids\" height=\"100%\" \n                    width=\"150%\" style=\"margin-left:5px ; border-radius: 20px;\" alt={{productDetails.prodName}}>\n                </div>               \n                <div class=\"col-4 mt-5\">\n                    <h5 style=\"font-weight: bolder; color:blue;\">What you're buying</h5>\n                    <p>{{productDetails.prodDescription}}</p>                  \n                </div>\n        </div>\n        <hr>\n        <div class=\"d-flex flex-column align-items-center\">\n            <div class=\"btn-quantity-name\">\n                <table>\n                    <tr>\n                        <td class=\"ax\"> Quantity:</td>\n                        <td class=\"ay\"> <i (click)=\"ReduceQuantity()\" \n                            class=\"fa fa-minus-circle text-primary m-2 changeQntyBtn\" \n                            style=\"cursor: pointer; font-size:2.5em;\"></i> \n                        </td>\n                            <td><strong  style=\"font-size:2.5em; margin: 0 20px;\">\n                                <input type=\"number\" [(ngModel)]=\"quantity\" (keyup.enter)=\"AddItem()\" \n                                style=\"font-size:0.3em; margin: 0 20px;\"/>\n                             </strong>\n                            </td>\n\n                        <td>\n                            <i (click)=\" IncreaseQuantity()\" \n                           class=\"fa fa-plus-circle text-primary m-2 changeQntyBtn\" \n                           style=\"cursor: pointer; font-size:2.5em;\"></i>\n                        </td>\n                    </tr>\n                    <tr class=\"price\">\n                        <td class=\"ax\"> Price:</td>\n                        <td class=\"ay align-items-center\">  <strong>£{{productDetails.prodPrice}}</strong>\n                        </td>\n                    </tr>\n                    <tr class=\"totalPrice\">\n                        <td class=\"ax\"> Total Price:</td>\n                        <td class=\"ay\"> <strong>£{{productDetails.prodPrice*quantity}}</strong>\n                        </td>\n                    </tr>\n                </table>   \n            </div>                        \n                <div class=\"btn-order\"> \n                <button  \n                (click)=\"AddItem()\"\n                [disabled]=\"quantity == quantityInBasket\" \n                class=\"btn btn-prodDetails fa fa-shoping-cart\">\n                    <strong>{{ButtonTxt}}</strong>\n                </button>\n              \n                    <button  routerLink=\"/basket\"\n                    class=\"btn btn-prodDetails btn-pbasket fa fa-shoping-cart\" >\n                        <strong>Go to basket</strong>\n                    </button>\n               \n            </div>\n         </div>\n    </div>\n</div>\n\n  \n  \n    \n       \n\n "]},"metadata":{},"sourceType":"module","externalDependencies":[]}