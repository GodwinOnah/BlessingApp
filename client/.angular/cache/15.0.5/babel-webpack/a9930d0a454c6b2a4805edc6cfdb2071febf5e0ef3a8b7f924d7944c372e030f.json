{"ast":null,"code":"import { take } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../prodshopmod.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"xng-breadcrumb\";\nimport * as i4 from \"app/basket/basket.service\";\nimport * as i5 from \"ngx-toastr\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"@angular/forms\";\nfunction ProductDetaialsComponent_div_0_h5_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"h5\")(1, \"strong\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r1.quantityInBasket, \" of this item are in your basket\");\n  }\n}\nfunction ProductDetaialsComponent_div_0_ng_container_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"strong\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r2.quantityInBasket, \" of this item is in your basket\");\n  }\n}\nfunction ProductDetaialsComponent_div_0_ng_container_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"strong\");\n    i0.ɵɵtext(2, \"This item is not in your basket\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n}\nfunction ProductDetaialsComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 1)(1, \"div\", 2)(2, \"marquee\", 3)(3, \"div\", 4);\n    i0.ɵɵtemplate(4, ProductDetaialsComponent_div_0_h5_4_Template, 3, 1, \"h5\", 5);\n    i0.ɵɵelementStart(5, \"h5\");\n    i0.ɵɵtemplate(6, ProductDetaialsComponent_div_0_ng_container_6_Template, 3, 1, \"ng-container\", 5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"h5\");\n    i0.ɵɵtemplate(8, ProductDetaialsComponent_div_0_ng_container_8_Template, 3, 0, \"ng-container\", 5);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(9, \"div\", 6)(10, \"div\", 7);\n    i0.ɵɵelement(11, \"img\", 8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"div\", 9)(13, \"h5\", 10);\n    i0.ɵɵtext(14, \"What you're buying\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"p\");\n    i0.ɵɵtext(16);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelement(17, \"hr\");\n    i0.ɵɵelementStart(18, \"div\", 11)(19, \"div\", 12)(20, \"table\")(21, \"tr\")(22, \"td\", 13);\n    i0.ɵɵtext(23, \" Quantity:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(24, \"td\", 14)(25, \"i\", 15);\n    i0.ɵɵlistener(\"click\", function ProductDetaialsComponent_div_0_Template_i_click_25_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.ReduceQuantity());\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(26, \"td\")(27, \"strong\", 16)(28, \"input\", 17);\n    i0.ɵɵlistener(\"ngModelChange\", function ProductDetaialsComponent_div_0_Template_input_ngModelChange_28_listener($event) {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.quantity = $event);\n    })(\"keyup.enter\", function ProductDetaialsComponent_div_0_Template_input_keyup_enter_28_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r7 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r7.AddItem());\n    });\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(29, \"td\")(30, \"i\", 18);\n    i0.ɵɵlistener(\"click\", function ProductDetaialsComponent_div_0_Template_i_click_30_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r8 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r8.IncreaseQuantity());\n    });\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(31, \"tr\", 19)(32, \"td\", 13);\n    i0.ɵɵtext(33, \" Price:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(34, \"td\", 20)(35, \"strong\");\n    i0.ɵɵtext(36);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(37, \"tr\", 21)(38, \"td\", 13);\n    i0.ɵɵtext(39, \" Total Price:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(40, \"td\", 14)(41, \"strong\");\n    i0.ɵɵtext(42);\n    i0.ɵɵelementEnd()()()()();\n    i0.ɵɵelementStart(43, \"div\", 22)(44, \"button\", 23);\n    i0.ɵɵlistener(\"click\", function ProductDetaialsComponent_div_0_Template_button_click_44_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r9 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r9.AddItem());\n    });\n    i0.ɵɵelementStart(45, \"strong\");\n    i0.ɵɵtext(46);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(47, \"button\", 24)(48, \"strong\");\n    i0.ɵɵtext(49, \"Go to basket\");\n    i0.ɵɵelementEnd()()()()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.quantityInBasket > 1);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.quantityInBasket == 1);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.quantityInBasket == 0);\n    i0.ɵɵadvance(3);\n    i0.ɵɵpropertyInterpolate(\"src\", ctx_r0.productDetails.prodPicture, i0.ɵɵsanitizeUrl);\n    i0.ɵɵpropertyInterpolate(\"alt\", ctx_r0.productDetails.prodName);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(ctx_r0.productDetails.prodDescription);\n    i0.ɵɵadvance(12);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.quantity);\n    i0.ɵɵadvance(8);\n    i0.ɵɵtextInterpolate1(\"\\u00A3\", ctx_r0.productDetails.prodPrice, \"\");\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate1(\"\\u00A3\", ctx_r0.productDetails.prodPrice * ctx_r0.quantity, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"disabled\", ctx_r0.quantity == ctx_r0.quantityInBasket);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r0.ButtonTxt);\n  }\n}\nexport class ProductDetaialsComponent {\n  constructor(prodshopService, activatedroute, breadcrumbService, basketService, toastr) {\n    this.prodshopService = prodshopService;\n    this.activatedroute = activatedroute;\n    this.breadcrumbService = breadcrumbService;\n    this.basketService = basketService;\n    this.toastr = toastr;\n    this.quantity = 1;\n    this.quantityInBasket = 0;\n    this.breadcrumbService.set('@productName', '');\n  }\n  ngOnInit() {\n    this.ViewProduct();\n  }\n  ViewProduct() {\n    const id = +this.activatedroute.snapshot.paramMap.get('productId');\n    if (id) this.prodshopService.getProduct(id).subscribe({\n      next: product => {\n        this.productDetails = product;\n        this.breadcrumbService.set('@productName', product.prodName);\n        this.basketService.basket$.pipe(take(1)).subscribe({\n          next: basket => {\n            const item = basket?.items.find(i => i.id === id);\n            if (item) {\n              this.quantity = item.quantity;\n              this.quantityInBasket = item.quantity;\n            }\n          }\n        });\n      },\n      error: error => console.log(error)\n    });\n  }\n  AddItem() {\n    if (this.productDetails) {\n      if (this.quantity < 1) return this.toastr.success(\"Item(s) cannot be 0 or negative\");\n      if (this.quantity > this.quantityInBasket) {\n        const itemToAdd = this.quantity - this.quantityInBasket;\n        this.quantityInBasket += itemToAdd;\n        this.basketService.AddItemsToBasket(this.productDetails, itemToAdd);\n      } else {\n        if (this.quantity < 1) return this.toastr.success(\"Item(s) cannot be 0 or negative\");\n        if (this.quantity < this.quantityInBasket) {\n          const itemToReduce = this.quantityInBasket - this.quantity;\n          this.quantityInBasket -= itemToReduce;\n          this.basketService.RemoveItemsFromBasket(this.productDetails.id, itemToReduce);\n        }\n      }\n    }\n  }\n  get ButtonTxt() {\n    return this.quantityInBasket == 0 ? \"Add quantity\" : \"Update\";\n  }\n  ReduceQuantity() {\n    if (this.quantity < 1) return;\n    this.quantity--;\n  }\n  IncreaseQuantity() {\n    this.quantity++;\n  }\n}\nProductDetaialsComponent.ɵfac = function ProductDetaialsComponent_Factory(t) {\n  return new (t || ProductDetaialsComponent)(i0.ɵɵdirectiveInject(i1.ProdshopmodService), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i3.BreadcrumbService), i0.ɵɵdirectiveInject(i4.BasketService), i0.ɵɵdirectiveInject(i5.ToastrService));\n};\nProductDetaialsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ProductDetaialsComponent,\n  selectors: [[\"app-product-detaials\"]],\n  decls: 1,\n  vars: 1,\n  consts: [[\"class\", \"d-flex justify-content-center background\", 4, \"ngIf\"], [1, \"d-flex\", \"justify-content-center\", \"background\"], [1, \"d-flex\", \"flex-column\", \"align-items-center\", 2, \"width\", \"150%\"], [\"direction\", \"left\"], [1, \"d-flex\", \"w-auto\", 2, \"color\", \"blue\", \"font-weight\", \"bold\", \"font-size\", \"larger\"], [4, \"ngIf\"], [1, \"row\"], [1, \"col-8\", \"align-items-center\"], [\"height\", \"100%\", \"width\", \"150%\", 1, \"card-img-top\", \"img-fluids\", 2, \"margin-left\", \"5px\", \"border-radius\", \"20px\", 3, \"src\", \"alt\"], [1, \"col-4\", \"mt-5\"], [2, \"font-weight\", \"bolder\", \"color\", \"blue\"], [1, \"d-flex\", \"flex-column\", \"align-items-center\"], [1, \"btn-quantity-name\"], [1, \"ax\"], [1, \"ay\"], [1, \"fa\", \"fa-minus-circle\", \"text-primary\", \"m-2\", \"changeQntyBtn\", 2, \"cursor\", \"pointer\", \"font-size\", \"2.5em\", 3, \"click\"], [2, \"font-size\", \"2.5em\", \"margin\", \"0 20px\"], [\"type\", \"number\", 2, \"font-size\", \"0.3em\", \"margin\", \"0 20px\", 3, \"ngModel\", \"ngModelChange\", \"keyup.enter\"], [1, \"fa\", \"fa-plus-circle\", \"text-primary\", \"m-2\", \"changeQntyBtn\", 2, \"cursor\", \"pointer\", \"font-size\", \"2.5em\", 3, \"click\"], [1, \"price\"], [1, \"ay\", \"align-items-center\"], [1, \"totalPrice\"], [1, \"btn-order\"], [1, \"btn\", \"btn-prodDetails\", \"fa\", \"fa-shoping-cart\", 3, \"disabled\", \"click\"], [\"routerLink\", \"/basket\", 1, \"btn\", \"btn-prodDetails\", \"btn-pbasket\", \"fa\", \"fa-shoping-cart\"]],\n  template: function ProductDetaialsComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, ProductDetaialsComponent_div_0_Template, 50, 11, \"div\", 0);\n    }\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngIf\", ctx.productDetails);\n    }\n  },\n  dependencies: [i6.NgIf, i2.RouterLink, i7.DefaultValueAccessor, i7.NumberValueAccessor, i7.NgControlStatus, i7.NgModel],\n  styles: [\".row[_ngcontent-%COMP%]{width:auto}.btn-prodDetails[_ngcontent-%COMP%]{background-color:#ff0;width:200px;height:100px;margin:10px 20px 10px 10px;border-radius:40px;border:solid black 5px}.btn-prodDetails[_ngcontent-%COMP%]:hover{background-color:green;color:#000;padding:10px}.btn-pbasket[_ngcontent-%COMP%]:hover{background-color:pink}.btn-order[_ngcontent-%COMP%]{margin-top:50px;font-size:20px;font-weight:bolder;margin-bottom:200px}.totalPrice[_ngcontent-%COMP%]{margin-top:10px}.changeQntyBtn[_ngcontent-%COMP%]:hover{background-color:#000;border-radius:10px}.btn-quantity-number[_ngcontent-%COMP%]{font-weight:bolder;margin:20px;font-size:20px}.background[_ngcontent-%COMP%]{background-color:#d3d3d3;border-radius:10px;width:80%;height:auto;margin-left:10%}.ax[_ngcontent-%COMP%]{text-align:right;color:gray}.ay[_ngcontent-%COMP%]{text-align:center;color:#000}tr[_ngcontent-%COMP%]{line-height:40px}table[_ngcontent-%COMP%]{font-size:30px;font-weight:bolder;margin:10px}.price[_ngcontent-%COMP%]{margin-bottom:10px;margin-top:10px}\"]\n});","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}