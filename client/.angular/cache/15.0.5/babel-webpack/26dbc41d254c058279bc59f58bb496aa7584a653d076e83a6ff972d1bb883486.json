{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"../Account/account.service\";\nimport * as i3 from \"../basket/basket.service\";\nimport * as i4 from \"../prodsharemod/order-total/order-total.component\";\nimport * as i5 from \"../prodsharemod/components/stepper/stepper.component\";\nimport * as i6 from \"@angular/cdk/stepper\";\nimport * as i7 from \"./checkouts/checkout-review/checkout-review.component\";\nexport class CheckoutComponent {\n  constructor(fb, accountService, basketService) {\n    this.fb = fb;\n    this.accountService = accountService;\n    this.basketService = basketService;\n    this.errors = null;\n    this.checkOutForm = this.fb.group({\n      addressForm: this.fb.group({\n        firstName: ['', Validators.required],\n        middleName: [''],\n        lastName: ['', Validators.required],\n        street: ['', Validators.required],\n        city: ['', Validators.required],\n        country: ['', Validators.required],\n        zipcode: ['', Validators.required],\n        phone: ['', Validators.required]\n      }),\n      deliveryForm: this.fb.group({\n        delivery: ['']\n      }),\n      paymentForm: this.fb.group({\n        nameOnCard: ['', Validators.required]\n      })\n    });\n  }\n  ngOnInit() {\n    this.AttachAddress();\n    this.AttachDelivery();\n  }\n  AttachAddress() {\n    const token = localStorage.getItem('token');\n    this.accountService.GetAddress(token).subscribe({\n      next: address => {\n        address && this.checkOutForm?.get('addressForm')?.patchValue(address);\n      }\n    });\n  }\n  AttachDelivery() {\n    const basket = this.basketService.CurrentBasket();\n    if (basket && basket.deliveryId) {\n      this.checkOutForm.get('deliveryForm')?.get('delivery')?.patchValue(basket.deliveryId.toString());\n    }\n  }\n}\nCheckoutComponent.ɵfac = function CheckoutComponent_Factory(t) {\n  return new (t || CheckoutComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.UserAccountService), i0.ɵɵdirectiveInject(i3.BasketService));\n};\nCheckoutComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: CheckoutComponent,\n  selectors: [[\"app-checkout\"]],\n  decls: 15,\n  vars: 9,\n  consts: [[1, \"container\", \"mt-5\"], [1, \"row\"], [1, \"col-8\"], [\"appStepper\", \"\"], [3, \"label\", \"completed\"], [3, \"checkOutForm\"], [3, \"deliveryForm\"], [3, \"label\"], [1, \"col-4\"]],\n  template: function CheckoutComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"app-stepper\", null, 3)(5, \"cdk-step\", 4);\n      i0.ɵɵelement(6, \"app-checkout-address\", 5);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(7, \"cdk-step\", 4);\n      i0.ɵɵelement(8, \"app-checkout-delivery\", 6);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(9, \"cdk-step\", 7);\n      i0.ɵɵelement(10, \"app-checkout-review\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(11, \"cdk-step\", 7);\n      i0.ɵɵelement(12, \"app-checkout-payment\", 5);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(13, \"div\", 8);\n      i0.ɵɵelement(14, \"app-order-total\");\n      i0.ɵɵelementEnd()()();\n    }\n    if (rf & 2) {\n      let tmp_1_0;\n      let tmp_4_0;\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"label\", \"Address\")(\"completed\", (tmp_1_0 = ctx.checkOutForm.get(\"addressForm\")) == null ? null : tmp_1_0.valid);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"checkOutForm\", ctx.checkOutForm);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"label\", \"Shipping\")(\"completed\", (tmp_4_0 = ctx.checkOutForm.get(\"deliveryForm\")) == null ? null : tmp_4_0.valid);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"deliveryForm\", ctx.checkOutForm);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"label\", \"Review\");\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"label\", \"Payment\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"checkOutForm\", ctx.checkOutForm);\n    }\n  },\n  dependencies: [i4.OrderTotalComponent, i5.StepperComponent, i6.CdkStep, i7.CheckoutReviewComponent]\n});","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}