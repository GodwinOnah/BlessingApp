{"ast":null,"code":"import { take } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../prodshopmod.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"xng-breadcrumb\";\nimport * as i4 from \"app/basket/basket.service\";\nimport * as i5 from \"ngx-toastr\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"@angular/forms\";\nfunction ProductDetaialsComponent_div_0_h4_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"h4\")(1, \"strong\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r1.quantityInBasket, \" of this item are in your basket\");\n  }\n}\nfunction ProductDetaialsComponent_div_0_h4_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"h4\")(1, \"strong\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r2.quantityInBasket, \" of this item is in your basket\");\n  }\n}\nfunction ProductDetaialsComponent_div_0_h4_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"h4\")(1, \"strong\");\n    i0.ɵɵtext(2, \"This item is not in your basket\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction ProductDetaialsComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 1)(1, \"div\", 2)(2, \"marquee\", 3);\n    i0.ɵɵtemplate(3, ProductDetaialsComponent_div_0_h4_3_Template, 3, 1, \"h4\", 4);\n    i0.ɵɵtemplate(4, ProductDetaialsComponent_div_0_h4_4_Template, 3, 1, \"h4\", 4);\n    i0.ɵɵtemplate(5, ProductDetaialsComponent_div_0_h4_5_Template, 3, 0, \"h4\", 4);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"div\", 5)(7, \"div\", 6);\n    i0.ɵɵelement(8, \"img\", 7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"div\", 8)(10, \"strong\", 9)(11, \"h2\");\n    i0.ɵɵtext(12, \"What you're buying\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(13, \"p\");\n    i0.ɵɵtext(14);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelement(15, \"hr\");\n    i0.ɵɵelementStart(16, \"div\", 10)(17, \"div\", 11)(18, \"table\")(19, \"tr\")(20, \"td\", 12)(21, \"i\", 13);\n    i0.ɵɵlistener(\"click\", function ProductDetaialsComponent_div_0_Template_i_click_21_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.ReduceQuantity());\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(22, \"td\")(23, \"strong\")(24, \"input\", 14);\n    i0.ɵɵlistener(\"ngModelChange\", function ProductDetaialsComponent_div_0_Template_input_ngModelChange_24_listener($event) {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.quantity = $event);\n    })(\"keyup.enter\", function ProductDetaialsComponent_div_0_Template_input_keyup_enter_24_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r7 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r7.AddItem());\n    });\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(25, \"td\")(26, \"i\", 15);\n    i0.ɵɵlistener(\"click\", function ProductDetaialsComponent_div_0_Template_i_click_26_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r8 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r8.IncreaseQuantity());\n    });\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(27, \"tr\", 16)(28, \"td\", 17);\n    i0.ɵɵtext(29, \" Price:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(30, \"td\", 18)(31, \"strong\");\n    i0.ɵɵtext(32);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(33, \"tr\", 19)(34, \"td\", 17);\n    i0.ɵɵtext(35, \" Total Price:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(36, \"td\", 20)(37, \"strong\");\n    i0.ɵɵtext(38);\n    i0.ɵɵelementEnd()()()()();\n    i0.ɵɵelementStart(39, \"div\", 21)(40, \"button\", 22);\n    i0.ɵɵlistener(\"click\", function ProductDetaialsComponent_div_0_Template_button_click_40_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r9 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r9.AddItem());\n    });\n    i0.ɵɵelementStart(41, \"strong\");\n    i0.ɵɵtext(42);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(43, \"button\", 23)(44, \"strong\");\n    i0.ɵɵtext(45, \"Go to basket\");\n    i0.ɵɵelementEnd()()()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.quantityInBasket > 1);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.quantityInBasket == 1);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.quantityInBasket == 0);\n    i0.ɵɵadvance(3);\n    i0.ɵɵpropertyInterpolate(\"src\", ctx_r0.productDetails.prodPicture, i0.ɵɵsanitizeUrl);\n    i0.ɵɵpropertyInterpolate(\"alt\", ctx_r0.productDetails.prodName);\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate(ctx_r0.productDetails.prodDescription);\n    i0.ɵɵadvance(10);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.quantity);\n    i0.ɵɵadvance(8);\n    i0.ɵɵtextInterpolate1(\"\\u00A3\", ctx_r0.productDetails.prodPrice, \"\");\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate1(\"\\u00A3\", ctx_r0.productDetails.prodPrice * ctx_r0.quantity, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"disabled\", ctx_r0.quantity == ctx_r0.quantityInBasket);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r0.ButtonTxt);\n  }\n}\nexport class ProductDetaialsComponent {\n  constructor(prodshopService, activatedroute, breadcrumbService, basketService, toastr) {\n    this.prodshopService = prodshopService;\n    this.activatedroute = activatedroute;\n    this.breadcrumbService = breadcrumbService;\n    this.basketService = basketService;\n    this.toastr = toastr;\n    this.quantity = 1;\n    this.quantityInBasket = 0;\n    this.breadcrumbService.set('@productName', '');\n  }\n  ngOnInit() {\n    this.ViewProduct();\n  }\n  ViewProduct() {\n    const id = +this.activatedroute.snapshot.paramMap.get('productId');\n    if (id) this.prodshopService.getProduct(id).subscribe({\n      next: product => {\n        this.productDetails = product;\n        this.breadcrumbService.set('@productName', product.prodName);\n        this.basketService.basket$.pipe(take(1)).subscribe({\n          next: basket => {\n            const item = basket?.items.find(i => i.id === id);\n            if (item) {\n              this.quantity = item.quantity;\n              this.quantityInBasket = item.quantity;\n            }\n          }\n        });\n      },\n      error: error => console.log(error)\n    });\n  }\n  AddItem() {\n    if (this.productDetails) {\n      if (this.quantity < 1) return this.toastr.success(\"Item(s) cannot be 0 or negative\");\n      if (this.quantity > this.quantityInBasket) {\n        const itemToAdd = this.quantity - this.quantityInBasket;\n        this.quantityInBasket += itemToAdd;\n        this.basketService.AddItemsToBasket(this.productDetails, itemToAdd);\n      } else {\n        if (this.quantity < 1) return this.toastr.success(\"Item(s) cannot be 0 or negative\");\n        if (this.quantity < this.quantityInBasket) {\n          const itemToReduce = this.quantityInBasket - this.quantity;\n          this.quantityInBasket -= itemToReduce;\n          this.basketService.RemoveItemsFromBasket(this.productDetails.id, itemToReduce);\n        }\n      }\n    }\n  }\n  get ButtonTxt() {\n    return this.quantityInBasket == 0 ? \"Add quantity\" : \"Update\";\n  }\n  ReduceQuantity() {\n    if (this.quantity < 1) return;\n    this.quantity--;\n  }\n  IncreaseQuantity() {\n    this.quantity++;\n  }\n}\nProductDetaialsComponent.ɵfac = function ProductDetaialsComponent_Factory(t) {\n  return new (t || ProductDetaialsComponent)(i0.ɵɵdirectiveInject(i1.ProdshopmodService), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i3.BreadcrumbService), i0.ɵɵdirectiveInject(i4.BasketService), i0.ɵɵdirectiveInject(i5.ToastrService));\n};\nProductDetaialsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ProductDetaialsComponent,\n  selectors: [[\"app-product-detaials\"]],\n  decls: 1,\n  vars: 1,\n  consts: [[\"class\", \"justify-content-center background\", 4, \"ngIf\"], [1, \"justify-content-center\", \"background\"], [1, \"w-auto\", 2, \"color\", \"deepskyblue\", \"font-weight\", \"bold\", \"font-size\", \"larger\", \"height\", \"10%\"], [\"direction\", \"left\"], [4, \"ngIf\"], [1, \"row\", 2, \"height\", \"50%\"], [1, \"col-8\", \"align-items-center\"], [\"height\", \"500px\", 1, \"card-img-top\", \"img-fluids\", 2, \"margin-left\", \"5px\", \"border-radius\", \"20px\", 3, \"src\", \"alt\"], [1, \"col-4\"], [2, \"font-weight\", \"bolder\"], [2, \"height\", \"40%\", \"margin-left\", \"20%\"], [1, \"btn-quantity-name\"], [1, \"ay\"], [1, \"fa\", \"fa-minus-circle\", \"text-primary\", \"m-2\", \"changeQntyBtn\", 2, \"cursor\", \"pointer\", \"font-size\", \"2em\", 3, \"click\"], [\"type\", \"number\", 2, \"font-size\", \"60%\", \"margin\", \"0 20px\", 3, \"ngModel\", \"ngModelChange\", \"keyup.enter\"], [1, \"fa\", \"fa-plus-circle\", \"text-primary\", \"m-2\", \"changeQntyBtn\", 2, \"cursor\", \"pointer\", \"font-size\", \"2em\", 3, \"click\"], [1, \"price\"], [1, \"ax\"], [\"colspan\", \"2\", 1, \"ay\", \"align-items-center\"], [1, \"totalPrice\"], [\"colspan\", \"2\", 1, \"ay\"], [1, \"btn-order\", 2, \"margin-left\", \"5%\"], [1, \"btn\", \"btn-prodDetails\", \"fa\", \"fa-shoping-cart\", 3, \"disabled\", \"click\"], [\"routerLink\", \"/basket\", 1, \"btn\", \"btn-prodDetails\", \"btn-pbasket\", \"fa\", \"fa-shoping-cart\"]],\n  template: function ProductDetaialsComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, ProductDetaialsComponent_div_0_Template, 46, 11, \"div\", 0);\n    }\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngIf\", ctx.productDetails);\n    }\n  },\n  dependencies: [i6.NgIf, i7.DefaultValueAccessor, i7.NumberValueAccessor, i7.NgControlStatus, i2.RouterLink, i7.NgModel],\n  styles: [\".row[_ngcontent-%COMP%] {\\n  width: auto;\\n}\\n\\n.btn-prodDetails[_ngcontent-%COMP%] {\\n  background-color: green;\\n  width: 200px;\\n  height: 100px;\\n  margin: 10px;\\n  margin-right: 20px;\\n  border-radius: 40px;\\n  border: solid black 5px;\\n}\\n\\n.btn-prodDetails[_ngcontent-%COMP%]:hover {\\n  background-color: white;\\n  color: black;\\n  padding: 10px;\\n}\\n\\n.btn-pbasket[_ngcontent-%COMP%]:hover {\\n  background-color: pink;\\n}\\n\\n.btn-order[_ngcontent-%COMP%] {\\n  margin-top: 50px;\\n  font-size: 20px;\\n  font-weight: bolder;\\n}\\n\\n.totalPrice[_ngcontent-%COMP%] {\\n  margin-top: 10px;\\n}\\n\\n.changeQntyBtn[_ngcontent-%COMP%]:hover {\\n  background-color: black;\\n  border-radius: 10px;\\n}\\n\\n.btn-quantity-number[_ngcontent-%COMP%] {\\n  font-weight: bolder;\\n  margin: 20px;\\n  font-size: 20px;\\n}\\n\\n.background[_ngcontent-%COMP%] {\\n  background-color: whitesmoke;\\n  border-radius: 10px;\\n  border: 5px solid;\\n  width: 1200px;\\n  height: 1000px;\\n  margin: 0 auto;\\n  padding: 10px;\\n  position: relative;\\n}\\n\\n.ax[_ngcontent-%COMP%] {\\n  text-align: right;\\n  color: grey;\\n}\\n\\n.ay[_ngcontent-%COMP%] {\\n  text-align: center;\\n  color: black;\\n}\\n\\ntr[_ngcontent-%COMP%] {\\n  line-height: 50px;\\n  width: 300px;\\n}\\n\\ntable[_ngcontent-%COMP%] {\\n  font-size: 30px;\\n  font-weight: bolder;\\n  margin: 10px;\\n  table-layout: fixed;\\n  width: 80%;\\n}\\n\\ninput[_ngcontent-%COMP%] {\\n  text-align: right;\\n}\\n\\n.price[_ngcontent-%COMP%] {\\n  margin-bottom: 10px;\\n  margin-top: 10px;\\n}\\n\\n.addTotalContainer[_ngcontent-%COMP%] {\\n  margin: 0 auto;\\n  padding: 10px;\\n  position: relative;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvcHJvZHVjdHMvcHJvZHVjdC1kZXRhaWFscy9wcm9kdWN0LWRldGFpYWxzLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksV0FBQTtBQUNKOztBQUVBO0VBQ0ksdUJBQUE7RUFDQSxZQUFBO0VBQ0EsYUFBQTtFQUNBLFlBQUE7RUFDQSxrQkFBQTtFQUNBLG1CQUFBO0VBQ0EsdUJBQUE7QUFDSjs7QUFHQTtFQUNJLHVCQUFBO0VBQ0EsWUFBQTtFQUNBLGFBQUE7QUFBSjs7QUFFQTtFQUNJLHNCQUFBO0FBQ0o7O0FBRUE7RUFDSSxnQkFBQTtFQUNBLGVBQUE7RUFDQSxtQkFBQTtBQUNKOztBQUVBO0VBQ0ksZ0JBQUE7QUFDSjs7QUFFQTtFQUNJLHVCQUFBO0VBQ0EsbUJBQUE7QUFDSjs7QUFDQTtFQUNJLG1CQUFBO0VBQ0EsWUFBQTtFQUNBLGVBQUE7QUFFSjs7QUFDQTtFQUNJLDRCQUFBO0VBQ0EsbUJBQUE7RUFDQSxpQkFBQTtFQUNBLGFBQUE7RUFDQSxjQUFBO0VBQ0EsY0FBQTtFQUNBLGFBQUE7RUFDQSxrQkFBQTtBQUVKOztBQUNBO0VBQ0ksaUJBQUE7RUFDQSxXQUFBO0FBRUo7O0FBQ0E7RUFDSSxrQkFBQTtFQUNBLFlBQUE7QUFFSjs7QUFDQTtFQUNJLGlCQUFBO0VBQ0EsWUFBQTtBQUVKOztBQUNBO0VBQ0ksZUFBQTtFQUNBLG1CQUFBO0VBQ0EsWUFBQTtFQUNBLG1CQUFBO0VBQ0EsVUFBQTtBQUVKOztBQUFBO0VBQ0ksaUJBQUE7QUFHSjs7QUFDQTtFQUNJLG1CQUFBO0VBQ0EsZ0JBQUE7QUFFSjs7QUFBQTtFQUNJLGNBQUE7RUFDQSxhQUFBO0VBQ0Esa0JBQUE7QUFHSiIsInNvdXJjZXNDb250ZW50IjpbIi5yb3d7XG4gICAgd2lkdGg6IGF1dG87XG59XG5cbi5idG4tcHJvZERldGFpbHN7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogZ3JlZW47XG4gICAgd2lkdGg6IDIwMHB4O1xuICAgIGhlaWdodDogMTAwcHg7XG4gICAgbWFyZ2luOiAxMHB4O1xuICAgIG1hcmdpbi1yaWdodDogMjBweDtcbiAgICBib3JkZXItcmFkaXVzOiA0MHB4IDtcbiAgICBib3JkZXI6IHNvbGlkIGJsYWNrIDVweDtcbiAgICAgIFxufVxuXG4uYnRuLXByb2REZXRhaWxzOmhvdmVye1xuICAgIGJhY2tncm91bmQtY29sb3I6d2hpdGU7XG4gICAgY29sb3I6YmxhY2s7IFxuICAgIHBhZGRpbmc6IDEwcHg7XG59XG4uYnRuLXBiYXNrZXQ6aG92ZXJ7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogcGluaztcbn1cblxuLmJ0bi1vcmRlcntcbiAgICBtYXJnaW4tdG9wOiA1MHB4O1xuICAgIGZvbnQtc2l6ZTogMjBweDtcbiAgICBmb250LXdlaWdodDogYm9sZGVyO1xuICAgXG59XG4udG90YWxQcmljZXsgIFxuICAgIG1hcmdpbi10b3A6IDEwcHg7XG59XG5cbi5jaGFuZ2VRbnR5QnRuOmhvdmVye1xuICAgIGJhY2tncm91bmQtY29sb3I6IGJsYWNrOyBcbiAgICBib3JkZXItcmFkaXVzOiAxMHB4O31cblxuLmJ0bi1xdWFudGl0eS1udW1iZXJ7XG4gICAgZm9udC13ZWlnaHQ6IGJvbGRlcjtcbiAgICBtYXJnaW46IDIwcHg7XG4gICAgZm9udC1zaXplOiAyMHB4O1xufVxuXG4uYmFja2dyb3VuZHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZXNtb2tlO1xuICAgIGJvcmRlci1yYWRpdXM6IDEwcHg7XG4gICAgYm9yZGVyOiA1cHggc29saWQ7XG4gICAgd2lkdGg6IDEyMDBweDtcbiAgICBoZWlnaHQ6IDEwMDBweDtcbiAgICBtYXJnaW46IDAgYXV0bztcbiAgICBwYWRkaW5nOiAxMHB4O1xuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsgICBcbn1cblxuLmF4e1xuICAgIHRleHQtYWxpZ246IHJpZ2h0O1xuICAgIGNvbG9yOmdyZXk7XG59XG5cbi5heXtcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgY29sb3I6YmxhY2s7XG59XG5cbnRye1xuICAgIGxpbmUtaGVpZ2h0OjUwcHg7XG4gICAgd2lkdGg6IDMwMHB4O1xufVxuXG50YWJsZXtcbiAgICBmb250LXNpemU6IDMwcHg7XG4gICAgZm9udC13ZWlnaHQ6IGJvbGRlcjtcbiAgICBtYXJnaW46IDEwcHg7XG4gICAgdGFibGUtbGF5b3V0OmZpeGVkO1xuICAgIHdpZHRoOjgwJTtcbn1cbmlucHV0IHsgXG4gICAgdGV4dC1hbGlnbjogcmlnaHQ7IFxufVxuXG5cbi5wcmljZXtcbiAgICBtYXJnaW4tYm90dG9tOiAxMHB4O1xuICAgIG1hcmdpbi10b3A6IDEwcHg7fVxuXG4uYWRkVG90YWxDb250YWluZXJ7XG4gICAgbWFyZ2luOiAwIGF1dG87XG4gICAgcGFkZGluZzogMTBweDtcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7ICAgXG59Il0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["take","i0","ProductDetaialsComponent","constructor","prodshopService","activatedroute","breadcrumbService","basketService","toastr","set","ngOnInit","ViewProduct","id","snapshot","paramMap","get","getProduct","subscribe","next","product","productDetails","prodName","basket$","pipe","basket","item","items","find","i","quantity","quantityInBasket","error","console","log","AddItem","success","itemToAdd","AddItemsToBasket","itemToReduce","RemoveItemsFromBasket","ButtonTxt","ReduceQuantity","IncreaseQuantity","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["/Users/godwinonah/Documents/TheBags/client/src/app/products/product-detaials/product-detaials.component.ts","/Users/godwinonah/Documents/TheBags/client/src/app/products/product-detaials/product-detaials.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { BasketService } from 'app/basket/basket.service';\nimport { IProduct } from 'app/prodsharemod/models/IProduct';\nimport { ToastrService } from 'ngx-toastr';\nimport { take } from 'rxjs';\nimport { BreadcrumbService } from 'xng-breadcrumb';\nimport { ProdshopmodService } from '../prodshopmod.service';\n\n@Component({\n  selector: 'app-product-detaials',\n  templateUrl: './product-detaials.component.html',\n  styleUrls: ['./product-detaials.component.scss']\n})\nexport class ProductDetaialsComponent implements OnInit{\n\n  productDetails?:IProduct;\n  quantity:number=1;\n  quantityInBasket=0;\n\n  constructor(\n            private prodshopService:ProdshopmodService, \n            private activatedroute:ActivatedRoute,\n            private breadcrumbService:BreadcrumbService,\n            private basketService: BasketService,\n            private toastr : ToastrService)\n            {\n              this.breadcrumbService.set('@productName','')\n          }\n\n  ngOnInit(): void {\n    this.ViewProduct();\n  }\n\n  ViewProduct(){\n    const id = +this.activatedroute.snapshot.paramMap.get('productId');\n\n    if(id)this.prodshopService.getProduct(id).subscribe(\n          { next : product=>\n              {\n              this.productDetails = product;\n              this.breadcrumbService.set('@productName',product.prodName);\n              this.basketService.basket$.pipe(take(1)).subscribe({\n                next : basket=>{\n                  const item = basket?.items.find ( i=>i.id === id )               \n                              if(item){\n                                this.quantity = item.quantity;\n                                this.quantityInBasket=item.quantity\n}}})},\n                error:error=>console.log(error)\n            })}\n\n  AddItem(){\n\n    if(this.productDetails){\n      if (this.quantity<1) \n       return this.toastr.success(\"Item(s) cannot be 0 or negative\");\n      if(this.quantity>this.quantityInBasket){\n        const itemToAdd = this.quantity-this.quantityInBasket;\n        this.quantityInBasket += itemToAdd;\n        this.basketService.AddItemsToBasket(this.productDetails,itemToAdd)\n      }\n      else{\n        if (this.quantity<1) \n         return this.toastr.success(\"Item(s) cannot be 0 or negative\");\n        if(this.quantity<this.quantityInBasket){\n          const itemToReduce=this.quantityInBasket-this.quantity;\n          this.quantityInBasket-=itemToReduce;\n          this.basketService.RemoveItemsFromBasket(this.productDetails.id,itemToReduce) \n        }\n      }\n    }  \n  }\n\n get ButtonTxt(){\n  return this.quantityInBasket==0?\"Add quantity\":\"Update\"   \n  }\n\n  ReduceQuantity(){\n    if(this.quantity<1) return;\n    this.quantity--;  \n  }\n\n  IncreaseQuantity(){\n    this.quantity++;  \n  }\n}\n","<div *ngIf=\"productDetails\" class=\"justify-content-center background\" >       \n        \n       \n            <div class=\"w-auto\" style=\"color: deepskyblue; font-weight: bold; font-size: larger;height: 10%;\">\n            <marquee  direction=\"left\" >\n            <h4 *ngIf=\"quantityInBasket>1\">\n                <strong>{{quantityInBasket}} of this item are in your basket</strong>             \n            </h4>\n\n            <h4 *ngIf=\"quantityInBasket==1\"> \n                <strong>{{quantityInBasket}} of this item is in your basket</strong>               \n            </h4>  \n\n            <h4 *ngIf=\"quantityInBasket==0\"> \n                <strong>This item is not in your basket</strong>               \n            </h4>  \n            </marquee>       \n            </div>\n       \n             <div class=\"row\" style=\"height:50%;\">\n                <div class=\"col-8 align-items-center\" >\n                    <img src={{productDetails.prodPicture}} class=\"card-img-top img-fluids\" height=\"500px\" \n                  style=\"margin-left:5px ; border-radius: 20px;\" alt={{productDetails.prodName}}>\n                </div>               \n                <div class=\"col-4\">\n                    <strong  style=\"font-weight: bolder;\"><h2>What you're buying</h2></strong>\n                    <p>{{productDetails.prodDescription}}</p>                  \n                </div>\n        </div>\n        <hr>\n        <div style=\"height:40%; margin-left: 20%;\" >\n            <div  class=\" btn-quantity-name\">\n                <table>\n                    <tr>\n                        \n                        <td class=\"ay\"> <i (click)=\"ReduceQuantity()\" \n                            class=\"fa fa-minus-circle text-primary m-2 changeQntyBtn\" \n                            style=\"cursor: pointer; font-size:2em\"></i> \n                        </td>\n                        <td>\n                            <strong >\n                                <input type=\"number\" [(ngModel)]=\"quantity\" (keyup.enter)=\"AddItem()\" \n                                        style=\"font-size:60%; margin: 0 20px;\"/>\n                             </strong>\n                        </td>\n\n                        <td>\n                            <i (click)=\" IncreaseQuantity()\" \n                           class=\"fa fa-plus-circle text-primary m-2 changeQntyBtn\" \n                           style=\"cursor: pointer; font-size:2em\"></i>\n                        </td>\n                    </tr>\n                    <tr class=\"price\">\n                        <td  class=\"ax\"> Price:</td>\n                        <td colspan=\"2\" class=\"ay align-items-center\">  <strong>£{{productDetails.prodPrice}}</strong>\n                        </td>\n                    </tr>\n                    <tr class=\"totalPrice\">\n                        <td  class=\"ax\"> Total Price:</td>\n                        <td colspan=\"2\" class=\"ay\"> <strong>£{{productDetails.prodPrice*quantity}}</strong>\n                        </td>\n                    </tr>\n                </table>   \n            </div>  \n\n            <div class=\"btn-order\" style=\"margin-left: 5%;\"> \n\n                <button  (click)=\"AddItem()\"\n                [disabled]=\"quantity == quantityInBasket\" \n                class=\"btn btn-prodDetails fa fa-shoping-cart\">\n                    <strong>{{ButtonTxt}}</strong>\n                </button>\n              \n                <button  routerLink=\"/basket\"\n                    class=\"btn btn-prodDetails btn-pbasket fa fa-shoping-cart\" >\n                        <strong>Go to basket</strong>\n                </button>\n               \n            </div>\n         </div>\n    </div>\n\n\n  \n  \n    \n       \n\n "]},"metadata":{},"sourceType":"module","externalDependencies":[]}