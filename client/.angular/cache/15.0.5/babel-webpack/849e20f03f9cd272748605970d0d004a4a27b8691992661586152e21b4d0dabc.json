{"ast":null,"code":"import { take } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../prodshopmod.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"xng-breadcrumb\";\nimport * as i4 from \"app/basket/basket.service\";\nimport * as i5 from \"ngx-toastr\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"@angular/forms\";\nfunction ProductDetaialsComponent_div_0_h4_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"h4\")(1, \"strong\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r1.quantityInBasket, \" of this item are in your basket\");\n  }\n}\nfunction ProductDetaialsComponent_div_0_h4_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"h4\")(1, \"strong\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r2.quantityInBasket, \" of this item is in your basket\");\n  }\n}\nfunction ProductDetaialsComponent_div_0_h4_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"h4\")(1, \"strong\");\n    i0.ɵɵtext(2, \"This item is not in your basket\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction ProductDetaialsComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 1)(1, \"div\", 2)(2, \"marquee\", 3);\n    i0.ɵɵtemplate(3, ProductDetaialsComponent_div_0_h4_3_Template, 3, 1, \"h4\", 4);\n    i0.ɵɵtemplate(4, ProductDetaialsComponent_div_0_h4_4_Template, 3, 1, \"h4\", 4);\n    i0.ɵɵtemplate(5, ProductDetaialsComponent_div_0_h4_5_Template, 3, 0, \"h4\", 4);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"div\", 5)(7, \"div\", 6);\n    i0.ɵɵelement(8, \"img\", 7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"div\", 8)(10, \"strong\", 9)(11, \"h2\");\n    i0.ɵɵtext(12, \"What you're buying\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(13, \"p\");\n    i0.ɵɵtext(14);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelement(15, \"hr\");\n    i0.ɵɵelementStart(16, \"div\", 10)(17, \"div\", 11)(18, \"table\")(19, \"tr\")(20, \"td\", 12)(21, \"i\", 13);\n    i0.ɵɵlistener(\"click\", function ProductDetaialsComponent_div_0_Template_i_click_21_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.ReduceQuantity());\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(22, \"td\")(23, \"strong\")(24, \"input\", 14);\n    i0.ɵɵlistener(\"ngModelChange\", function ProductDetaialsComponent_div_0_Template_input_ngModelChange_24_listener($event) {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.quantity = $event);\n    })(\"keyup.enter\", function ProductDetaialsComponent_div_0_Template_input_keyup_enter_24_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r7 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r7.AddItem());\n    });\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(25, \"td\")(26, \"i\", 15);\n    i0.ɵɵlistener(\"click\", function ProductDetaialsComponent_div_0_Template_i_click_26_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r8 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r8.IncreaseQuantity());\n    });\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(27, \"tr\", 16)(28, \"td\", 17);\n    i0.ɵɵtext(29, \" Price:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(30, \"td\", 18)(31, \"strong\");\n    i0.ɵɵtext(32);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(33, \"tr\", 19)(34, \"td\", 17);\n    i0.ɵɵtext(35, \" Total Price:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(36, \"td\", 20)(37, \"strong\");\n    i0.ɵɵtext(38);\n    i0.ɵɵelementEnd()()()()();\n    i0.ɵɵelementStart(39, \"div\", 21)(40, \"button\", 22);\n    i0.ɵɵlistener(\"click\", function ProductDetaialsComponent_div_0_Template_button_click_40_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r9 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r9.AddItem());\n    });\n    i0.ɵɵelementStart(41, \"strong\");\n    i0.ɵɵtext(42);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(43, \"button\", 23)(44, \"strong\");\n    i0.ɵɵtext(45, \"Go to basket\");\n    i0.ɵɵelementEnd()()()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.quantityInBasket > 1);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.quantityInBasket == 1);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.quantityInBasket == 0);\n    i0.ɵɵadvance(3);\n    i0.ɵɵpropertyInterpolate(\"src\", ctx_r0.productDetails.prodPicture, i0.ɵɵsanitizeUrl);\n    i0.ɵɵpropertyInterpolate(\"alt\", ctx_r0.productDetails.prodName);\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate(ctx_r0.productDetails.prodDescription);\n    i0.ɵɵadvance(10);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.quantity);\n    i0.ɵɵadvance(8);\n    i0.ɵɵtextInterpolate1(\"\\u00A3\", ctx_r0.productDetails.prodPrice, \"\");\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate1(\"\\u00A3\", ctx_r0.productDetails.prodPrice * ctx_r0.quantity, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"disabled\", ctx_r0.quantity == ctx_r0.quantityInBasket);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r0.ButtonTxt);\n  }\n}\nexport class ProductDetaialsComponent {\n  constructor(prodshopService, activatedroute, breadcrumbService, basketService, toastr) {\n    this.prodshopService = prodshopService;\n    this.activatedroute = activatedroute;\n    this.breadcrumbService = breadcrumbService;\n    this.basketService = basketService;\n    this.toastr = toastr;\n    this.quantity = 1;\n    this.quantityInBasket = 0;\n    this.breadcrumbService.set('@productName', '');\n  }\n  ngOnInit() {\n    this.ViewProduct();\n  }\n  ViewProduct() {\n    const id = +this.activatedroute.snapshot.paramMap.get('productId');\n    if (id) this.prodshopService.getProduct(id).subscribe({\n      next: product => {\n        this.productDetails = product;\n        this.breadcrumbService.set('@productName', product.prodName);\n        this.basketService.basket$.pipe(take(1)).subscribe({\n          next: basket => {\n            const item = basket?.items.find(i => i.id === id);\n            if (item) {\n              this.quantity = item.quantity;\n              this.quantityInBasket = item.quantity;\n            }\n          }\n        });\n      },\n      error: error => console.log(error)\n    });\n  }\n  AddItem() {\n    if (this.productDetails) {\n      if (this.quantity < 1) return this.toastr.success(\"Item(s) cannot be 0 or negative\");\n      if (this.quantity > this.quantityInBasket) {\n        const itemToAdd = this.quantity - this.quantityInBasket;\n        this.quantityInBasket += itemToAdd;\n        this.basketService.AddItemsToBasket(this.productDetails, itemToAdd);\n      } else {\n        if (this.quantity < 1) return this.toastr.success(\"Item(s) cannot be 0 or negative\");\n        if (this.quantity < this.quantityInBasket) {\n          const itemToReduce = this.quantityInBasket - this.quantity;\n          this.quantityInBasket -= itemToReduce;\n          this.basketService.RemoveItemsFromBasket(this.productDetails.id, itemToReduce);\n        }\n      }\n    }\n  }\n  get ButtonTxt() {\n    return this.quantityInBasket == 0 ? \"Add quantity\" : \"Update\";\n  }\n  ReduceQuantity() {\n    if (this.quantity < 1) return;\n    this.quantity--;\n  }\n  IncreaseQuantity() {\n    this.quantity++;\n  }\n}\nProductDetaialsComponent.ɵfac = function ProductDetaialsComponent_Factory(t) {\n  return new (t || ProductDetaialsComponent)(i0.ɵɵdirectiveInject(i1.ProdshopmodService), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i3.BreadcrumbService), i0.ɵɵdirectiveInject(i4.BasketService), i0.ɵɵdirectiveInject(i5.ToastrService));\n};\nProductDetaialsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ProductDetaialsComponent,\n  selectors: [[\"app-product-detaials\"]],\n  decls: 1,\n  vars: 1,\n  consts: [[\"class\", \"p-body\", 4, \"ngIf\"], [1, \"p-body\"], [1, \"txt\"], [\"direction\", \"left\"], [4, \"ngIf\"], [1, \"row\", 2, \"height\", \"50%\"], [1, \"col-8\", \"align-items-center\"], [\"height\", \"500px\", 1, \"card-img-top\", \"img-fluids\", 2, \"margin-left\", \"5px\", \"border-radius\", \"20px\", 3, \"src\", \"alt\"], [1, \"col-4\"], [2, \"font-weight\", \"bolder\"], [2, \"height\", \"40%\", \"margin-left\", \"20%\"], [1, \"btn-quantity-name\"], [1, \"ay\"], [1, \"fa\", \"fa-minus-circle\", \"text-primary\", \"m-2\", \"changeQntyBtn\", 2, \"cursor\", \"pointer\", \"font-size\", \"2em\", 3, \"click\"], [\"type\", \"number\", 1, \"inputxt\", 3, \"ngModel\", \"ngModelChange\", \"keyup.enter\"], [1, \"fa\", \"fa-plus-circle\", \"text-primary\", \"m-2\", \"changeQntyBtn\", 2, \"cursor\", \"pointer\", \"font-size\", \"2em\", 3, \"click\"], [1, \"price\"], [1, \"ax\"], [\"colspan\", \"2\", 1, \"ay\", \"align-items-center\"], [1, \"totalPrice\"], [\"colspan\", \"2\", 1, \"ay\"], [1, \"btn-order\", 2, \"margin-left\", \"5%\"], [1, \"btn-prodDetails\", 3, \"disabled\", \"click\"], [\"routerLink\", \"/basket\", 1, \"btn-prodDetails\"]],\n  template: function ProductDetaialsComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, ProductDetaialsComponent_div_0_Template, 46, 11, \"div\", 0);\n    }\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngIf\", ctx.productDetails);\n    }\n  },\n  dependencies: [i6.NgIf, i7.DefaultValueAccessor, i7.NumberValueAccessor, i7.NgControlStatus, i2.RouterLink, i7.NgModel],\n  styles: [\".txt[_ngcontent-%COMP%]{background-color:#d3d3d3}.inputxt[_ngcontent-%COMP%]{font-size:70%;width:100%}.btn-prodDetails[_ngcontent-%COMP%]{background-color:green;width:auto;height:50%;margin:5%;border-radius:20%;border:solid black 5px}.btn-prodDetails[_ngcontent-%COMP%]:hover{background-color:#fff;color:#000}.btn-pbasket[_ngcontent-%COMP%]:hover{background-color:pink}.btn-order[_ngcontent-%COMP%]{margin-top:50px;font-size:20px;font-weight:bolder}.totalPrice[_ngcontent-%COMP%]{margin-top:10px}.changeQntyBtn[_ngcontent-%COMP%]:hover{background-color:#000;border-radius:10px}.btn-quantity-number[_ngcontent-%COMP%]{font-weight:bolder;margin:20px;font-size:20px}.p-body[_ngcontent-%COMP%]{background-color:#f5f5f5;border:5px solid;width:100%;height:auto;padding:5%}.ax[_ngcontent-%COMP%]{text-align:right;color:gray}.ay[_ngcontent-%COMP%]{text-align:center;color:#000}tr[_ngcontent-%COMP%]{line-height:50px;width:300px}table[_ngcontent-%COMP%]{font-size:30px;font-weight:bolder;margin:10px;table-layout:fixed;width:80%}input[_ngcontent-%COMP%]{text-align:right}.price[_ngcontent-%COMP%]{margin-bottom:10px;margin-top:10px}.addTotalContainer[_ngcontent-%COMP%]{margin:0 auto;padding:10px;position:relative}@media (max-width: 679px){.txt[_ngcontent-%COMP%]{background-color:#d3d3d3}.p-body[_ngcontent-%COMP%]{background-color:#f5f5f5;border:5px solid;width:100%;height:auto;padding:5%}.inputxt[_ngcontent-%COMP%]{font-size:70%;width:100%}.btn-prodDetails[_ngcontent-%COMP%]{background-color:green;width:auto;height:50%;margin:5%;border-radius:20%;border:solid black 5px}}\"]\n});","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}