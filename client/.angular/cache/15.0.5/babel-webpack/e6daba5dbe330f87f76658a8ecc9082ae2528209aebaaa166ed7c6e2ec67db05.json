{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"../Account/account.service\";\nimport * as i3 from \"../basket/basket.service\";\nimport * as i4 from \"../prodsharemod/order-total/order-total.component\";\nimport * as i5 from \"../prodsharemod/components/stepper/stepper.component\";\nimport * as i6 from \"@angular/cdk/stepper\";\nimport * as i7 from \"./checkouts/checkout-address/checkout-address.component\";\nimport * as i8 from \"./checkouts/checkout-delivery/checkout-delivery.component\";\nimport * as i9 from \"./checkouts/checkout-review/checkout-review.component\";\nimport * as i10 from \"./checkouts/checkout-payment/checkout-payment.component\";\nexport class CheckoutComponent {\n  constructor(fb, accountService, basketService) {\n    this.fb = fb;\n    this.accountService = accountService;\n    this.basketService = basketService;\n    this.errors = null;\n    this.checkOutForm = this.fb.group({\n      addressForm: this.fb.group({\n        firstName: ['', Validators.required],\n        middleName: [''],\n        lastName: ['', Validators.required],\n        street: ['', Validators.required],\n        city: ['', Validators.required],\n        country: ['', Validators.required],\n        zipcode: ['', Validators.required],\n        phone: ['', Validators.required]\n      }),\n      deliveryForm: this.fb.group({\n        delivery: ['']\n      }),\n      paymentForm: this.fb.group({\n        nameOnCard: ['', Validators.required]\n      })\n    });\n  }\n  ngOnInit() {\n    this.AttachAddress();\n    this.AttachDelivery();\n  }\n  AttachAddress() {\n    const token = localStorage.getItem('token');\n    this.accountService.GetAddress(token).subscribe({\n      next: address => {\n        address && this.checkOutForm?.get('addressForm')?.patchValue(address);\n      }\n    });\n  }\n  AttachDelivery() {\n    const basket = this.basketService.CurrentBasket();\n    if (basket && basket.deliveryId) {\n      this.checkOutForm.get('deliveryForm')?.get('delivery')?.patchValue(basket.deliveryId.toString());\n    }\n  }\n}\nCheckoutComponent.ɵfac = function CheckoutComponent_Factory(t) {\n  return new (t || CheckoutComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.UserAccountService), i0.ɵɵdirectiveInject(i3.BasketService));\n};\nCheckoutComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: CheckoutComponent,\n  selectors: [[\"app-checkout\"]],\n  decls: 15,\n  vars: 9,\n  consts: [[1, \"container\", \"mt-5\"], [1, \"row\"], [1, \"col-8\"], [\"appStepper\", \"\"], [3, \"label\", \"completed\"], [3, \"checkOutForm\"], [3, \"deliveryForm\"], [3, \"label\"], [1, \"col-4\"]],\n  template: function CheckoutComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"app-stepper\", null, 3)(5, \"cdk-step\", 4);\n      i0.ɵɵelement(6, \"app-checkout-address\", 5);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(7, \"cdk-step\", 4);\n      i0.ɵɵelement(8, \"app-checkout-delivery\", 6);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(9, \"cdk-step\", 7);\n      i0.ɵɵelement(10, \"app-checkout-review\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(11, \"cdk-step\", 7);\n      i0.ɵɵelement(12, \"app-checkout-payment\", 5);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(13, \"div\", 8);\n      i0.ɵɵelement(14, \"app-order-total\");\n      i0.ɵɵelementEnd()()();\n    }\n    if (rf & 2) {\n      let tmp_1_0;\n      let tmp_4_0;\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"label\", \"Address\")(\"completed\", (tmp_1_0 = ctx.checkOutForm.get(\"addressForm\")) == null ? null : tmp_1_0.valid);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"checkOutForm\", ctx.checkOutForm);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"label\", \"Shipping\")(\"completed\", (tmp_4_0 = ctx.checkOutForm.get(\"deliveryForm\")) == null ? null : tmp_4_0.valid);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"deliveryForm\", ctx.checkOutForm);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"label\", \"Review\");\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"label\", \"Payment\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"checkOutForm\", ctx.checkOutForm);\n    }\n  },\n  dependencies: [i4.OrderTotalComponent, i5.StepperComponent, i6.CdkStep, i7.CheckoutAddressComponent, i8.CheckoutDeliveryComponent, i9.CheckoutReviewComponent, i10.CheckoutPaymentComponent],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"AACA,SAAsBA,UAAU,QAAQ,gBAAgB;;;;;;;;;;;;AASxD,OAAM,MAAOC,iBAAiB;EAI5BC,YAAoBC,EAAgB,EAC1BC,cAAiC,EACjCC,aAA6B;IAFnB,OAAE,GAAFF,EAAE;IACZ,mBAAc,GAAdC,cAAc;IACd,kBAAa,GAAbC,aAAa;IAJvB,WAAM,GAAqB,IAAI;IAajC,iBAAY,GAAG,IAAI,CAACF,EAAE,CAACG,KAAK,CAAC;MACvBC,WAAW,EAAI,IAAI,CAACJ,EAAE,CAACG,KAAK,CAAC;QACzBE,SAAS,EAAE,CAAC,EAAE,EAACR,UAAU,CAACS,QAAQ,CAAC;QACnCC,UAAU,EAAE,CAAC,EAAE,CAAC;QAChBC,QAAQ,EAAE,CAAC,EAAE,EAACX,UAAU,CAACS,QAAQ,CAAC;QAClCG,MAAM,EAAE,CAAC,EAAE,EAACZ,UAAU,CAACS,QAAQ,CAAC;QAChCI,IAAI,EAAE,CAAC,EAAE,EAACb,UAAU,CAACS,QAAQ,CAAC;QAC9BK,OAAO,EAAE,CAAC,EAAE,EAACd,UAAU,CAACS,QAAQ,CAAC;QACjCM,OAAO,EAAE,CAAC,EAAE,EAACf,UAAU,CAACS,QAAQ,CAAC;QACjCO,KAAK,EAAE,CAAC,EAAE,EAAChB,UAAU,CAACS,QAAQ;OACjC,CAAC;MAEFQ,YAAY,EAAI,IAAI,CAACd,EAAE,CAACG,KAAK,CAAC;QAC5BY,QAAQ,EAAG,CAAC,EAAE;OACf,CAAC;MAEFC,WAAW,EAAI,IAAI,CAAChB,EAAE,CAACG,KAAK,CAAC;QACzBc,UAAU,EAAG,CAAC,EAAE,EAACpB,UAAU,CAACS,QAAQ;OACrC;KACJ,CAAC;EA3BD;EAEHY,QAAQ;IACN,IAAI,CAACC,aAAa,EAAE;IACpB,IAAI,CAACC,cAAc,EAAE;EAEvB;EAuBED,aAAa;IACX,MAAME,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IAC3C,IAAI,CAACtB,cAAc,CAACuB,UAAU,CAACH,KAAK,CAAC,CAACI,SAAS,CAAC;MAC9CC,IAAI,EAAEC,OAAO,IAAG;QACfA,OAAO,IAAI,IAAI,CAACC,YAAY,EAAEC,GAAG,CAAC,aAAa,CAAC,EAAEC,UAAU,CAACH,OAAO,CAAC;MACtE;KACD,CAAC;EACJ;EAEAP,cAAc;IACZ,MAAMW,MAAM,GAAG,IAAI,CAAC7B,aAAa,CAAC8B,aAAa,EAAE;IACjD,IAAGD,MAAM,IAAIA,MAAM,CAACE,UAAU,EAAC;MAC7B,IAAI,CAACL,YAAY,CAACC,GAAG,CAAC,cAAc,CAAC,EAAEA,GAAG,CAAC,UAAU,CAAC,EACpDC,UAAU,CAACC,MAAM,CAACE,UAAU,CAACC,QAAQ,EAAE,CAAC;;EAE9C;;AAnDSpC,iBAAiB;mBAAjBA,iBAAiB;AAAA;AAAjBA,iBAAiB;QAAjBA,iBAAiB;EAAAqC;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MCV9BC,8BAA4B;MAKhBA,0CAA2E;MAC/EA,iBAAW;MACXA,mCAAqF;MACjFA,2CAA6E;MACjFA,iBAAW;MACXA,mCAA8B;MAC1BA,uCAA2C;MAC/CA,iBAAW;MACXA,oCAA8B;MAC1BA,2CAA2E;MAC/EA,iBAAW;MAGfA,+BAAmB;MACfA,mCACkB;MACtBA,iBAAM;;;;;MAjBQA,eAAmB;MAAnBA,iCAAmB;MACHA,eAA6B;MAA7BA,+CAA6B;MAE7CA,eAAoB;MAApBA,kCAAoB;MACHA,eAA6B;MAA7BA,+CAA6B;MAE9CA,eAAkB;MAAlBA,gCAAkB;MAGlBA,eAAmB;MAAnBA,iCAAmB;MACHA,eAA6B;MAA7BA,+CAA6B","names":["Validators","CheckoutComponent","constructor","fb","accountService","basketService","group","addressForm","firstName","required","middleName","lastName","street","city","country","zipcode","phone","deliveryForm","delivery","paymentForm","nameOnCard","ngOnInit","AttachAddress","AttachDelivery","token","localStorage","getItem","GetAddress","subscribe","next","address","checkOutForm","get","patchValue","basket","CurrentBasket","deliveryId","toString","selectors","decls","vars","consts","template","i0"],"sourceRoot":"","sources":["/Users/godwinonah/Documents/TheBags/client/src/app/Checkout/checkout.component.ts","/Users/godwinonah/Documents/TheBags/client/src/app/Checkout/checkout.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { FormBuilder, Validators } from '@angular/forms';\nimport { UserAccountService } from '../Account/account.service';\nimport { BasketService } from '../basket/basket.service';\n\n@Component({\n  selector: 'app-checkout',\n  templateUrl: './checkout.component.html',\n  styleUrls: ['./checkout.component.scss']\n})\nexport class CheckoutComponent implements OnInit{\n\n  errors : string[] | null = null;\n\n  constructor(private fb : FormBuilder, \n    private accountService:UserAccountService, \n    private basketService : BasketService,\n   ){}\n\n  ngOnInit(): void {\n    this.AttachAddress();   \n    this.AttachDelivery();\n  \n  }\n\ncheckOutForm = this.fb.group({\n      addressForm :  this.fb.group({\n          firstName: ['',Validators.required],\n          middleName: [''],\n          lastName: ['',Validators.required],\n          street: ['',Validators.required],\n          city: ['',Validators.required],\n          country: ['',Validators.required],\n          zipcode: ['',Validators.required],\n          phone: ['',Validators.required],\n      }),\n\n      deliveryForm :  this.fb.group({\n        delivery : ['']\n      }),\n\n      paymentForm :  this.fb.group({\n          nameOnCard : ['',Validators.required]\n        })\n    })\n\n    AttachAddress(){\n      const token = localStorage.getItem('token');\n      this.accountService.GetAddress(token).subscribe({\n        next: address => {\n         address && this.checkOutForm?.get('addressForm')?.patchValue(address)\n        }\n      })\n    }\n    \n    AttachDelivery(){  \n      const basket = this.basketService.CurrentBasket();    \n      if(basket && basket.deliveryId){    \n        this.checkOutForm.get('deliveryForm')?.get('delivery')\n        ?.patchValue(basket.deliveryId.toString());\n      }      \n    }\n}\n","<div class=\"container mt-5\">\n<div class=\"row\">\n    <div class=\"col-8\">\n       <app-stepper #appStepper>\n        <cdk-step [label]=\"'Address'\" [completed]=\"checkOutForm.get('addressForm')?.valid\">\n            <app-checkout-address [checkOutForm]=\"checkOutForm\"></app-checkout-address>    \n        </cdk-step>\n        <cdk-step [label]=\"'Shipping'\" [completed]=\"checkOutForm.get('deliveryForm')?.valid\">\n            <app-checkout-delivery [deliveryForm]=\"checkOutForm\"></app-checkout-delivery>  \n        </cdk-step>\n        <cdk-step [label]=\"'Review'\" >\n            <app-checkout-review></app-checkout-review>  \n        </cdk-step>\n        <cdk-step [label]=\"'Payment'\">\n            <app-checkout-payment [checkOutForm]=\"checkOutForm\"></app-checkout-payment>  \n        </cdk-step>\n       </app-stepper>\n    </div>\n    <div class=\"col-4\">\n        <app-order-total>\n        </app-order-total>\n    </div>\n</div>\n</div>\n\n\n\n\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}